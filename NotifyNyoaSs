local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer
local pgui = player:WaitForChild("PlayerGui", 10)

if not pgui then return end

local screen = Instance.new("ScreenGui")
screen.Name = "NyoaSs_NotifyLib"
screen.ResetOnSpawn = false
screen.IgnoreGuiInset = true
screen.DisplayOrder = 999999
screen.Parent = pgui

getgenv().Notify = function(mainText, subText, duration)
    subText = subText or "by Slivkineepy, Menanes"
    duration = duration or 5

    task.spawn(function()
        local notify = Instance.new("Frame")
        notify.Size = UDim2.new(0, 300, 0, 56)
        notify.Position = UDim2.new(0.5, -150, 0, -70)
        notify.BackgroundColor3 = Color3.fromRGB(20, 20, 24)
        notify.BorderSizePixel = 0
        notify.ClipsDescendants = true
        notify.ZIndex = 999999
        notify.Parent = screen

        Instance.new("UICorner", notify).CornerRadius = UDim.new(0, 10)

        local stroke = Instance.new("UIStroke", notify)
        stroke.Color = Color3.new(1, 1, 1)
        stroke.Transparency = 0.8
        stroke.Thickness = 1

        local title = Instance.new("TextLabel", notify)
        title.Size = UDim2.new(1, -50, 0, 22)
        title.Position = UDim2.new(0, 12, 0, 8)
        title.BackgroundTransparency = 1
        title.Text = tostring(mainText)
        title.TextColor3 = Color3.new(1, 1, 1)
        title.Font = Enum.Font.GothamBold
        title.TextSize = 15
        title.TextXAlignment = Enum.TextXAlignment.Left

        local subtitle = Instance.new("TextLabel", notify)
        subtitle.Size = UDim2.new(1, -50, 0, 16)
        subtitle.Position = UDim2.new(0, 12, 0, 30)
        subtitle.BackgroundTransparency = 1
        subtitle.Text = tostring(subText)
        subtitle.TextColor3 = Color3.fromRGB(160, 160, 170)
        subtitle.Font = Enum.Font.Gotham
        subtitle.TextSize = 12
        subtitle.TextXAlignment = Enum.TextXAlignment.Left

        local closeBtn = Instance.new("TextButton", notify)
        closeBtn.Size = UDim2.new(0, 24, 0, 24)
        closeBtn.Position = UDim2.new(1, -32, 0, 8)
        closeBtn.BackgroundTransparency = 1
        closeBtn.Text = "x"
        closeBtn.TextColor3 = Color3.fromRGB(180, 180, 180)
        closeBtn.Font = Enum.Font.GothamBold
        closeBtn.TextSize = 18

        local barBg = Instance.new("Frame", notify)
        barBg.Size = UDim2.new(1, -24, 0, 3)
        barBg.Position = UDim2.new(0, 12, 1, -10)
        barBg.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
        barBg.BorderSizePixel = 0
        Instance.new("UICorner", barBg).CornerRadius = UDim.new(0, 2)

        local bar = Instance.new("Frame", barBg)
        bar.Size = UDim2.new(1, 0, 1, 0)
        bar.BackgroundColor3 = Color3.fromRGB(100, 180, 255)
        bar.BorderSizePixel = 0
        Instance.new("UICorner", bar).CornerRadius = UDim.new(0, 2)

        local function hide()
            TweenService:Create(notify, TweenInfo.new(0.4, Enum.EasingStyle.Quint), {Position = UDim2.new(0.5, -150, 0, -70)}):Play()
            task.wait(0.45)
            notify:Destroy()
        end

        closeBtn.MouseButton1Click:Connect(hide)

        TweenService:Create(notify, TweenInfo.new(0.5, Enum.EasingStyle.Quint), {Position = UDim2.new(0.5, -150, 0, 12)}):Play()
        local progress = TweenService:Create(bar, TweenInfo.new(duration, Enum.EasingStyle.Linear), {Size = UDim2.new(0, 0, 1, 0)})
        progress:Play()
        progress.Completed:Wait()
        hide()
    end)
end
