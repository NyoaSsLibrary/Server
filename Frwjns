local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")

local player = Players.LocalPlayer
local pgui = player:WaitForChild("PlayerGui")

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "NyoaSs"
screenGui.ResetOnSpawn = false
screenGui.IgnoreGuiInset = true
screenGui.Parent = pgui

local obj = Workspace:WaitForChild("Plots")

-- Уведомление
local function createNotify(text)
	local notify = Instance.new("Frame")
	notify.Size = UDim2.new(0,300,0,56)
	notify.Position = UDim2.new(0.5,-150,0,-70)
	notify.BackgroundColor3 = Color3.fromRGB(20,20,24)
	notify.BorderSizePixel = 0
	notify.ClipsDescendants = true
	notify.ZIndex = 999
	notify.Parent = screenGui
	Instance.new("UICorner",notify).CornerRadius = UDim.new(0,10)
	local stroke = Instance.new("UIStroke",notify)
	stroke.Color = Color3.new(1,1,1)
	stroke.Transparency = 0.8
	stroke.Thickness = 1

	local title = Instance.new("TextLabel")
	title.Size = UDim2.new(1,-50,0,22)
	title.Position = UDim2.new(0,12,0,8)
	title.BackgroundTransparency = 1
	title.Text = text
	title.TextColor3 = Color3.new(1,1,1)
	title.Font = Enum.Font.GothamBold
	title.TextSize = 15
	title.TextXAlignment = Enum.TextXAlignment.Left
	title.ZIndex = 999
	title.Parent = notify

	local author = Instance.new("TextLabel")
	author.Size = UDim2.new(1,-50,0,16)
	author.Position = UDim2.new(0,12,0,30)
	author.BackgroundTransparency = 1
	author.Text = "by Slivkineepy, Menanes"
	author.TextColor3 = Color3.fromRGB(160,160,170)
	author.Font = Enum.Font.Gotham
	author.TextSize = 12
	author.TextXAlignment = Enum.TextXAlignment.Left
	author.ZIndex = 999
	author.Parent = notify

	local closeBtn = Instance.new("TextButton")
	closeBtn.Size = UDim2.new(0,24,0,24)
	closeBtn.Position = UDim2.new(1,-32,0,8)
	closeBtn.BackgroundTransparency = 1
	closeBtn.Text = "x"
	closeBtn.TextColor3 = Color3.fromRGB(180,180,180)
	closeBtn.Font = Enum.Font.GothamBold
	closeBtn.TextSize = 18
	closeBtn.ZIndex = 999
	closeBtn.Parent = notify

	local barBg = Instance.new("Frame")
	barBg.Size = UDim2.new(1,-24,0,3)
	barBg.Position = UDim2.new(0,12,1,-10)
	barBg.BackgroundColor3 = Color3.fromRGB(40,40,45)
	barBg.ZIndex = 999
	barBg.Parent = notify
	Instance.new("UICorner",barBg).CornerRadius = UDim.new(0,2)

	local bar = Instance.new("Frame")
	bar.Size = UDim2.new(1,0,1,0)
	bar.BackgroundColor3 = Color3.fromRGB(100,180,255)
	bar.ZIndex = 999
	bar.Parent = barBg
	Instance.new("UICorner",bar).CornerRadius = UDim.new(0,2)

	local shown = false
	local function hide()
		if shown then
			shown = false
			TweenService:Create(notify,TweenInfo.new(0.4,Enum.EasingStyle.Quint),{Position=UDim2.new(0.5,-150,0,-70)}):Play()
			task.wait(0.45)
			notify:Destroy()
		end
	end
	local function show()
		shown = true
		TweenService:Create(notify,TweenInfo.new(0.5,Enum.EasingStyle.Quint),{Position=UDim2.new(0.5,-150,0,12)}):Play()
		local t = TweenService:Create(bar,TweenInfo.new(5,Enum.EasingStyle.Linear),{Size=UDim2.new(0,0,1,0)})
		t:Play()
		t.Completed:Wait()
		if shown then hide() end
	end
	closeBtn.MouseButton1Click:Connect(hide)
	task.spawn(show)
end

-- сквозь плоты крч
local xrayEnabled = false
local xrayConnection = nil

local function XrayOn(cur)
	if cur:FindFirstChild("AnimationController") then return end
	for _, v in pairs(cur:GetChildren()) do
		if v:IsA("BasePart") and not v.Parent:FindFirstChild("Humanoid") then
			v.LocalTransparencyModifier = 0.75
		end
		XrayOn(v)
	end
end

local function XrayOff(cur)
	if cur:FindFirstChild("AnimationController") then return end
	for _, v in pairs(cur:GetChildren()) do
		if v:IsA("BasePart") and not v.Parent:FindFirstChild("Humanoid") then
			v.LocalTransparencyModifier = 0
		end
		XrayOff(v)
	end
end

-- база таймер
local baseEspData = {}
local baseEspEnabled = false

local function CreateBaseEsp(plot)
	if not plot or not plot:FindFirstChild("Spawn") or baseEspData[plot] then return end
	local spawn = plot.Spawn
	local bill = Instance.new("BillboardGui", spawn)
	bill.Size = UDim2.new(0,180,0,60)
	bill.StudsOffset = Vector3.new(0,20,0)
	bill.AlwaysOnTop = true
	local f = Instance.new("Frame", bill)
	f.Size = UDim2.new(1,0,1,0)
	f.BackgroundTransparency = 1
	local owner = Instance.new("TextLabel", f)
	owner.Size = UDim2.new(1,0,0.5,0)
	owner.BackgroundTransparency = 1
	owner.TextColor3 = Color3.fromRGB(0,255,255)
	owner.Font = Enum.Font.Arcade
	owner.TextSize = 28
	owner.TextStrokeTransparency = 0
	owner.Text = plot:FindFirstChild("Owner") and "Owner: "..plot.Owner.Value or "Free"
	local dist = Instance.new("TextLabel", f)
	dist.Size = UDim2.new(1,0,0.5,0)
	dist.Position = UDim2.new(0,0,0.5,0)
	dist.BackgroundTransparency = 1
	dist.TextColor3 = Color3.fromRGB(255,255,100)
	dist.Font = Enum.Font.Arcade
	dist.TextSize = 24
	dist.TextStrokeTransparency = 0

	baseEspData[plot] = {
		bill = bill, owner = owner, dist = dist,
		conn = RunService.Heartbeat:Connect(function()
			if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
				local d = (player.Character.HumanoidRootPart.Position - spawn.Position).Magnitude
				dist.Text = string.format("%.0f studs", d)
				if plot:FindFirstChild("Owner") then owner.Text = "Owner: "..plot.Owner.Value end
			end
		end)
	}
end

local function RemoveBaseEsp(plot)
	if baseEspData[plot] then
		baseEspData[plot].bill:Destroy()
		baseEspData[plot].conn:Disconnect()
		baseEspData[plot] = nil
	end
end

-- Главное окно
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0,420,0,300)
mainFrame.Position = UDim2.new(0.5,-210,0.5,-150)
mainFrame.BackgroundColor3 = Color3.fromRGB(18,18,22)
mainFrame.ClipsDescendants = true
mainFrame.Parent = screenGui
Instance.new("UICorner",mainFrame).CornerRadius = UDim.new(0,10)
local mstroke = Instance.new("UIStroke",mainFrame)
mstroke.Color = Color3.new(1,1,1)
mstroke.Transparency = 0.85
mstroke.Thickness = 1

local titleBar = Instance.new("Frame")
titleBar.Size = UDim2.new(1,0,0,44)
titleBar.BackgroundColor3 = Color3.fromRGB(22,22,26)
titleBar.Parent = mainFrame
Instance.new("UICorner",titleBar).CornerRadius = UDim.new(0,10)

local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(0,300,1,0)
titleLabel.Position = UDim2.new(0,16,0,0)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "NyoaSs | discord.gg/WBYkWfPQC2"
titleLabel.TextColor3 = Color3.fromRGB(240,240,245)
titleLabel.Font = Enum.Font.GothamMedium
titleLabel.TextSize = 15
titleLabel.TextXAlignment = Enum.TextXAlignment.Left
titleLabel.Parent = titleBar

local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0,40,0,40)
closeBtn.Position = UDim2.new(1,-44,0,2)
closeBtn.BackgroundTransparency = 1
closeBtn.Text = "x"
closeBtn.TextColor3 = Color3.fromRGB(255,100,100)
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 26
closeBtn.ZIndex = 10
closeBtn.Parent = titleBar

local minimizeBtn = Instance.new("TextButton")
minimizeBtn.Size = UDim2.new(0,40,0,40)
minimizeBtn.Position = UDim2.new(1,-84,0,2)
minimizeBtn.BackgroundTransparency = 1
minimizeBtn.Text = "-"
minimizeBtn.TextColor3 = Color3.fromRGB(200,200,200)
minimizeBtn.Font = Enum.Font.Gotham
minimizeBtn.TextSize = 30
minimizeBtn.ZIndex = 10
minimizeBtn.Parent = titleBar

local line1 = Instance.new("Frame")
line1.Size = UDim2.new(1,-20,0,1)
line1.Position = UDim2.new(0,10,0,44)
line1.BackgroundColor3 = Color3.new(1,1,1)
line1.BackgroundTransparency = 0.8
line1.Parent = mainFrame

local line2 = Instance.new("Frame")
line2.Size = UDim2.new(1,-20,0,1)
line2.Position = UDim2.new(0,10,0,92)
line2.BackgroundColor3 = Color3.new(1,1,1)
line2.BackgroundTransparency = 0.8
line2.Parent = mainFrame

local tabContainer = Instance.new("Frame")
tabContainer.Size = UDim2.new(1,-20,0,46)
tabContainer.Position = UDim2.new(0,10,0,46)
tabContainer.BackgroundTransparency = 1
tabContainer.Parent = mainFrame

local tabs = {"Combat","Visuals","Performance","Misc","Settings"}
local pages = {}

for i,name in ipairs(tabs) do
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0,76,1,0)
	btn.Position = UDim2.new(0,(i-1)*78,0,0)
	btn.BackgroundTransparency = 1
	btn.Text = name
	btn.TextColor3 = i==1 and Color3.new(1,1,1) or Color3.fromRGB(140,140,150)
	btn.Font = Enum.Font.GothamMedium
	btn.TextSize = 14
	btn.ZIndex = 5
	btn.Parent = tabContainer
	local ind = Instance.new("Frame")
	ind.Name = "Indicator"
	ind.Size = UDim2.new(0,60,0,2)
	ind.Position = UDim2.new(0.5,-30,1,-2)
	ind.BackgroundColor3 = Color3.new(1,1,1)
	ind.Visible = i==1
	ind.ZIndex = 6
	ind.Parent = btn
	btn.MouseButton1Click:Connect(function()
		for _,b in tabContainer:GetChildren() do
			if b:IsA("TextButton") then
				b.TextColor3 = Color3.fromRGB(140,140,150)
				if b:FindFirstChild("Indicator") then b.Indicator.Visible = false end
			end
		end
		btn.TextColor3 = Color3.new(1,1,1)
		ind.Visible = true
		for _,p in pages do p.Visible = (p.Name == name) end
	end)
end

local contentArea = Instance.new("Frame")
contentArea.Size = UDim2.new(1,-20,1,-106)
contentArea.Position = UDim2.new(0,10,0,96)
contentArea.BackgroundTransparency = 1
contentArea.Parent = mainFrame

for _,name in ipairs(tabs) do
	local page = Instance.new("Frame")
	page.Name = name
	page.Size = UDim2.new(1,0,1,0)
	page.BackgroundTransparency = 1
	page.Visible = name=="Combat"
	page.ZIndex = 3
	page.Parent = contentArea
	table.insert(pages,page)
end

-- Функции создания кнопок
local function createToggle(parent,text,yPos,callback)
	local frame = Instance.new("Frame")
	frame.Size = UDim2.new(1,-20,0,40)
	frame.Position = UDim2.new(0,10,0,yPos)
	frame.BackgroundTransparency = 1
	frame.Parent = parent

	local label = Instance.new("TextLabel")
	label.Size = UDim2.new(1,-70,1,0)
	label.BackgroundTransparency = 1
	label.Text = text
	label.TextColor3 = Color3.fromRGB(200,200,200)
	label.Font = Enum.Font.Gotham
	label.TextSize = 14
	label.TextXAlignment = Enum.TextXAlignment.Left
	label.Parent = frame

	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0,52,0,26)
	btn.Position = UDim2.new(1,-62,0.5,-13)
	btn.BackgroundColor3 = Color3.fromRGB(60,60,65)
	btn.Text = ""
	btn.AutoButtonColor = false
	btn.Parent = frame
	Instance.new("UICorner",btn).CornerRadius = UDim.new(0,13)

	local circle = Instance.new("Frame")
	circle.Size = UDim2.new(0,20,0,20)
	circle.Position = UDim2.new(0,4,0.5,-10)
	circle.BackgroundColor3 = Color3.fromRGB(180,180,180)
	circle.Parent = btn
	Instance.new("UICorner",circle).CornerRadius = UDim.new(1,0)

	local state = false
	btn.MouseButton1Click:Connect(function()
		state = not state
		btn.BackgroundColor3 = state and Color3.fromRGB(100,180,255) or Color3.fromRGB(60,60,65)
		TweenService:Create(circle,TweenInfo.new(0.2),{Position = state and UDim2.new(0,28,0.5,-10) or UDim2.new(0,4,0.5,-10)}):Play()
		if callback then callback(state) end
	end)
	local function set(s)
		state = s
		btn.BackgroundColor3 = s and Color3.fromRGB(100,180,255) or Color3.fromRGB(60,60,65)
		circle.Position = s and UDim2.new(0,28,0.5,-10) or UDim2.new(0,4,0.5,-10)
	end
	set(state)
	return set
end

local function createButton(parent,text,yPos,callback)
	local frame = Instance.new("Frame",parent)
	frame.Size = UDim2.new(1,-20,0,40)
	frame.Position = UDim2.new(0,10,0,yPos)
	frame.BackgroundTransparency = 1

	local btn = Instance.new("TextButton",frame)
	btn.Size = UDim2.new(1,0,1,0)
	btn.BackgroundColor3 = Color3.fromRGB(70,130,180)
	btn.Text = text
	btn.TextColor3 = Color3.new(1,1,1)
	btn.Font = Enum.Font.GothamBold
	btn.TextSize = 15
	Instance.new("UICorner",btn).CornerRadius = UDim.new(0,8)
	btn.MouseButton1Click:Connect(callback)
end

--оптимизация нема лагов
createToggle(contentArea.Performance,"Potato Rendering",10,function(state)
	local ws = workspace
	local gameDescendants = game:GetDescendants()
	local settingsService = settings()

	if state then
		for _, obj in ipairs(ws:GetDescendants()) do
			if obj:IsA("BasePart") then
				obj.Material = Enum.Material.SmoothPlastic
				obj.Reflectance = 0
				obj.CastShadow = false
			elseif obj:IsA("Decal") or obj:IsA("Texture") then
				obj.Transparency = 1
			end
		end

		settingsService.Rendering.QualityLevel = Enum.QualityLevel.Level01

		for _, v in ipairs(gameDescendants) do
			if v:IsA("ParticleEmitter") or v:IsA("Beam") or v:IsA("Trail") then
				v.Enabled = false
			elseif v:IsA("PointLight") or v:IsA("SpotLight") or v:IsA("SurfaceLight") then
				v.Enabled = false
			end
		end
	else
		settingsService.Rendering.QualityLevel = Enum.QualityLevel.Automatic

		for _, v in ipairs(gameDescendants) do
			if v:IsA("Decal") or v:IsA("Texture") then
				v.Transparency = 0
			elseif v:IsA("Light") then
				v.Enabled = true
			elseif v:IsA("ParticleEmitter") or v:IsA("Beam") or v:IsA("Trail") then
				v.Enabled = true
			end
		end
	end
end)

-- нормальный перфоманс
createToggle(contentArea.Performance,"Ok Fps boost",58,function(state)
    local Lighting = game:GetService("Lighting")
	local Terrain = workspace:FindFirstChildOfClass("Terrain")
	local settingsService = settings()

	local function optimize(obj)
		for _,v in pairs(obj:GetDescendants()) do
			if v:IsA("BasePart") then
				v.Material = Enum.Material.SmoothPlastic
				v.Reflectance = 0
			end
			if v:IsA("Decal") or v:IsA("Texture") then
				v.Transparency = state and 1 or 0
			end
			if v:IsA("ParticleEmitter") or v:IsA("Trail") or v:IsA("Smoke") or v:IsA("Fire") or v:IsA("Sparkles") then
				v.Enabled = not not (state and false)
			end
		end
	end

	if state then
		pcall(function()
			settingsService.Rendering.QualityLevel = Enum.QualityLevel.Level01
		end)

		Lighting.GlobalShadows = false
		Lighting.Brightness = 1
		Lighting.FogEnd = 1e9

		for _,v in pairs(Lighting:GetDescendants()) do
			if v:IsA("BlurEffect") or v:IsA("SunRaysEffect") or v:IsA("BloomEffect") or v:IsA("ColorCorrectionEffect") or v:IsA("DepthOfFieldEffect") then
				v.Enabled = false
			end
		end

		if Terrain then
			Terrain.WaterWaveSize = 0
			Terrain.WaterWaveSpeed = 0
			Terrain.WaterReflectance = 0
			Terrain.WaterTransparency = 1
			Terrain.Decoration = false
		end

		optimize(workspace)

		workspace.DescendantAdded:Connect(function(obj)
			task.wait()
			if obj:IsA("ParticleEmitter") or obj:IsA("Trail") or obj:IsA("Smoke") or obj:IsA("Fire") or obj:IsA("Sparkles") then
				obj.Enabled = false
			end
			if obj:IsA("Decal") or obj:IsA("Texture") then
				obj.Transparency = 1
			end
			if obj:IsA("BasePart") then
				obj.Material = Enum.Material.SmoothPlastic
				obj.Reflectance = 0
			end
		end)
	else
		settingsService.Rendering.QualityLevel = Enum.QualityLevel.Automatic
		Lighting.GlobalShadows = true
		Lighting.Brightness = 2
		Lighting.FogEnd = 100000

		for _,v in pairs(Lighting:GetDescendants()) do
			if v:IsA("BlurEffect") or v:IsA("SunRaysEffect") or v:IsA("BloomEffect") or v:IsA("ColorCorrectionEffect") or v:IsA("DepthOfFieldEffect") then
				v.Enabled = true
			end
		end

		if Terrain then
			Terrain.WaterWaveSize = 1
			Terrain.WaterWaveSpeed = 1
			Terrain.WaterReflectance = 0.3
			Terrain.WaterTransparency = 0.7
			Terrain.Decoration = true
		end

		for _, obj in ipairs(workspace:GetDescendants()) do
			if obj:IsA("BasePart") then
				obj.Material = Enum.Material.Plastic
				obj.Reflectance = 0.3
			end
			if obj:IsA("Decal") or obj:IsA("Texture") then
				obj.Transparency = 0
			end
			if obj:IsA("ParticleEmitter") or obj:IsA("Trail") or obj:IsA("Smoke") or obj:IsA("Fire") or obj:IsA("Sparkles") then
				obj.Enabled = true
			end
		end
	end
end)

createToggle(contentArea.Performance,"Super Optimization [Don't recommend],106,function(state)
    local debris = game:GetService("Debris")
	local lighting = game:GetService("Lighting")
	local players = game:GetService("Players")
	local runService = game:GetService("RunService")

	local maxDebrisTime = 5
	local partLimitPerPlayer = 500
	local maxParts = 5000
	local physicsThrottle = Enum.PhysicsSimulationRate.Fixed240Hz

	local function isPartOfPlayerCharacter(part)
		if part:IsDescendantOf(players) then return true end
		for _, player in pairs(players:GetPlayers()) do
			if player.Character and part:IsDescendantOf(player.Character) then
				return true
			end
		end
		return false
	end

	local cleanUpThread, limitPlayerThread, limitGlobalThread

	local function cleanUpUnanchoredParts()
		while state do
			task.wait(2)
			for _, part in pairs(workspace:GetDescendants()) do
				if part:IsA("BasePart") and not part.Anchored and not isPartOfPlayerCharacter(part) then
					debris:AddItem(part, maxDebrisTime)
				end
			end
		end
	end

	local function limitPartCountForPlayers()
		while state do
			task.wait(5)
			for _, player in pairs(players:GetPlayers()) do
				local totalParts = 0
				if player.Character and player.Character.Parent then
					for _, part in pairs(player.Character:GetDescendants()) do
						if part:IsA("BasePart") then
							totalParts = totalParts + 1
						end
					end
				end
				if totalParts > partLimitPerPlayer then
					for _, part in pairs(player.Character:GetDescendants()) do
						if part:IsA("BasePart") and not isPartOfPlayerCharacter(part) then
							debris:AddItem(part, maxDebrisTime)
						end
					end
				end
			end
		end
	end

	local function limitGlobalPartCount()
		while state do
			task.wait(10)
			local totalParts = 0
			for _, part in pairs(workspace:GetDescendants()) do
				if part:IsA("BasePart") and not isPartOfPlayerCharacter(part) then
					totalParts = totalParts + 1
				end
			end
			if totalParts > maxParts then
				for _, part in pairs(workspace:GetDescendants()) do
					if part:IsA("BasePart") and not part.Anchored and not isPartOfPlayerCharacter(part) then
						debris:AddItem(part, maxDebrisTime)
					end
				end
			end
		end
	end

	local function optimizeLighting()
		lighting.GlobalShadows = not not state and false or true
		lighting.ClockTime = state and 12 or 14
	end

	local function optimizePhysics()
		settings().Physics.PhysicsEnvironmentalThrottle = Enum.EnviromentalPhysicsThrottle.Default
		settings().Physics.AllowSleep = true
		runService.Stepped:Connect(function()
			settings().Physics.PhysicsSimulationRate = state and physicsThrottle or Enum.PhysicsSimulationRate.Default
		end)
	end

	local function optimizeMemory()
		game:GetService("GarbageCollectorService"):RequestGarbageCollection()
	end

	if state then
		cleanUpThread = task.spawn(cleanUpUnanchoredParts)
		limitPlayerThread = task.spawn(limitPartCountForPlayers)
		limitGlobalThread = task.spawn(limitGlobalPartCount)
	end

	optimizeLighting()
	optimizePhysics()
	optimizeMemory()
end)

createToggle(contentArea.Performance,"Delete parts",154,function(state)
    local debris = game:GetService("Debris")
	local players = game:GetService("Players")

	local maxDebrisTime = 5

	local function isPartOfPlayerCharacter(part)
		if part:IsDescendantOf(players) then return true end
		for _, player in pairs(players:GetPlayers()) do
			if player.Character and part:IsDescendantOf(player.Character) then
				return true
			end
		end
		return false
	end

	local deleteThread

	local function deletePartsLoop()
		while state do
			task.wait(2)
			for _, part in pairs(workspace:GetDescendants()) do
				if part:IsA("BasePart") and not part.Anchored and not isPartOfPlayerCharacter(part) then
					debris:AddItem(part, maxDebrisTime)
				end
			end
		end
	end

	if state then
		deleteThread = task.spawn(deletePartsLoop)
	end
end)

-- визуальчики
createToggle(contentArea.Visuals,"Xray [GUI]",10,function(state)
    xrayEnabled = state
	if state then
		XrayOn(obj)
		if xrayConnection then xrayConnection:Disconnect() end
		local last = tick()
		xrayConnection = RunService.Heartbeat:Connect(function()
			if tick()-last >= 1 then XrayOn(obj) last = tick() end
		end)
	else
		XrayOff(obj)
		if xrayConnection then xrayConnection:Disconnect() xrayConnection = nil end
	end
end)

createToggle(contentArea.Visuals,"Timer Base ESP",58,function(state)
	baseEspEnabled = state
	if state then
		for _,p in obj:GetChildren() do if p:IsA("Model") then CreateBaseEsp(p) end end
		obj.ChildAdded:Connect(function(p) task.wait(0.5) CreateBaseEsp(p) end)
	else
		for p,_ in baseEspData do RemoveBaseEsp(p) end
	end
end)

-- комбат
createButton(contentArea.Combat,"Melee Aura [GUI]",10,function()
	if getgenv().MeleeAuraLoaded then createNotify("Melee Aura already loaded!") return end
	getgenv().MeleeAuraLoaded = true
	createNotify("Loading Melee Aura...")
	loadstring(game:HttpGet("https://pastefy.app/QGZ2PBmO/raw"))()
end)

-- миск
createToggle(contentArea.Misc,"Unwalk (No Walk Anim)",10,function(state)
	local anim = player.Character and player.Character:FindFirstChild("Animate")
	if anim then anim.Disabled = state end
end)

createButton(contentArea.Misc,"Float (Gui)",58,function()
	loadstring(game:HttpGet("https://pastefy.app/bEpkvtGv/raw"))()
end)

createButton(contentArea.Misc,"Invisible (Gui)",106,function()
	loadstring(game:HttpGet("https://pastefy.app/4MoHlkcU/raw"))()

createButton(contentArea.Misc,"Fly Glitch [ Grapple Hook PC ]",154,function()
	if getgenv().FlyGlitchLoaded then createNotify("Fly Glitch already loaded!") return end
	getgenv().FlyGlitchLoaded = true
	createNotify("Fly Glitch loaded!")

	local flyGui = Instance.new("ScreenGui")
	flyGui.Name = "NyoaSs_Fly"
	flyGui.ResetOnSpawn = false
	flyGui.Parent = pgui

	local flyMain = Instance.new("Frame")
	flyMain.Size = UDim2.new(0, 220, 0, 140)
	flyMain.Position = UDim2.new(0.5, -110, 0.5, -70)
	flyMain.BackgroundColor3 = Color3.fromRGB(12, 12, 12)
	flyMain.Active = true
	flyMain.Draggable = true
	flyMain.Parent = flyGui
	Instance.new("UICorner", flyMain).CornerRadius = UDim.new(0, 14)
	local stroke = Instance.new("UIStroke", flyMain)
	stroke.Color = Color3.fromRGB(0, 255, 255)
	stroke.Thickness = 2.5

	local title = Instance.new("TextLabel")
	title.Size = UDim2.new(1,0,0,36)
	title.BackgroundTransparency = 1
	title.Text = "NyoaSs — FLY"
	title.TextColor3 = Color3.fromRGB(0, 255, 255)
	title.Font = Enum.Font.GothamBlack
	title.TextSize = 19
	title.Parent = flyMain

	local closeFly = Instance.new("TextButton")
	closeFly.Size = UDim2.new(0, 32, 0, 32)
	closeFly.Position = UDim2.new(1, -38, 0, 4)
	closeFly.BackgroundTransparency = 1
	closeFly.Text = "×"
	closeFly.TextColor3 = Color3.fromRGB(255, 80, 80)
	closeFly.Font = Enum.Font.GothamBold
	closeFly.TextSize = 28
	closeFly.Parent = flyMain

	local toggleBtn = Instance.new("TextButton")
	toggleBtn.Size = UDim2.new(0.86, 0, 0, 42)
	toggleBtn.Position = UDim2.new(0.07, 0, 0.58, 0)
	toggleBtn.BackgroundColor3 = Color3.fromRGB(0, 180, 180)
	toggleBtn.Text = "FLY OFF"
	toggleBtn.TextColor3 = Color3.new(1,1,1)
	toggleBtn.Font = Enum.Font.GothamBold
	toggleBtn.TextSize = 18
	toggleBtn.Parent = flyMain
	Instance.new("UICorner", toggleBtn).CornerRadius = UDim.new(0, 10)

	local pl = player
	local rs = ReplicatedStorage
	local run = RunService
	local uis = UserInputService
	local cam = Workspace.CurrentCamera

	local enabled = false
	local flySpeed = 60
	local item = "Grapple Hook"
	local useRE = rs:WaitForChild("Packages",10):WaitForChild("Net",10):WaitForChild("RE/UseItem",10)
	local args = {0.10267777442932129}

	local char, hum, hrp
	local bv = Instance.new("BodyVelocity")
	bv.MaxForce = Vector3.new(1e5,1e5,1e5)
	local bg = Instance.new("BodyGyro")
	bg.MaxTorque = Vector3.new(1e5,1e5,1e5)
	bg.P = 10000

	local keys = {W=false,S=false,A=false,D=false,Space=false,Ctrl=false}

	local function buy() pcall(function() rs.Packages.Net["RF/CoinsShopService/RequestBuy"]:InvokeServer(item) end) end
	local function equip() if char then local t = char:FindFirstChild(item) or pl.Backpack:FindFirstChild(item) if t then t.Parent = char end end end
	local function fake() if char and char:FindFirstChild(item) then pcall(function() useRE:FireServer(unpack(args)) end) end end

	local function updateChar()
		char = pl.Character or pl.CharacterAdded:Wait()
		hum = char:WaitForChild("Humanoid")
		hrp = char:WaitForChild("HumanoidRootPart")
	end

	local function startFly()
		bv.Parent = hrp
		bg.Parent = hrp
		hum.PlatformStand = true
	end

	local function stopFly()
		bv.Parent = nil
		bg.Parent = nil
		if hum then hum.PlatformStand = false end
	end

	uis.InputBegan:Connect(function(i,gp)
		if gp or not enabled then return end
		if i.KeyCode == Enum.KeyCode.W then keys.W = true
		elseif i.KeyCode == Enum.KeyCode.S then keys.S = true
		elseif i.KeyCode == Enum.KeyCode.A then keys.A = true
		elseif i.KeyCode == Enum.KeyCode.D then keys.D = true
		elseif i.KeyCode == Enum.KeyCode.Space then keys.Space = true
		elseif i.KeyCode == Enum.KeyCode.LeftControl then keys.Ctrl = true end
	end)

	uis.InputEnded:Connect(function(i)
		if not enabled then return end
		if i.KeyCode == Enum.KeyCode.W then keys.W = false
		elseif i.KeyCode == Enum.KeyCode.S then keys.S = false
		elseif i.KeyCode == Enum.KeyCode.A then keys.A = false
		elseif i.KeyCode == Enum.KeyCode.D then keys.D = false
		elseif i.KeyCode == Enum.KeyCode.Space then keys.Space = false
		elseif i.KeyCode == Enum.KeyCode.LeftControl then keys.Ctrl = false end
	end)

	run.RenderStepped:Connect(function()
		if not enabled or not hrp then return end
		equip() fake()

		local dir = Vector3.new()
		if keys.W then dir += cam.CFrame.LookVector end
		if keys.S then dir -= cam.CFrame.LookVector end
		if keys.A then dir -= cam.CFrame.RightVector end
		if keys.D then dir += cam.CFrame.RightVector end
		if keys.Space then dir += Vector3.new(0,1,0) end
		if keys.Ctrl then dir -= Vector3.new(0,1,0) end

		if dir.Magnitude > 0 then dir = dir.Unit end
		bv.Velocity = dir * flySpeed
		bg.CFrame = cam.CFrame
	end)

	pl.CharacterAdded:Connect(function()
		task.wait(0.5)
		updateChar()
		if enabled then buy() task.wait(0.3) equip() startFly() end
	end)

	toggleBtn.MouseButton1Click:Connect(function()
		enabled = not enabled
		updateChar()
		if enabled then
			toggleBtn.Text = "FLY ON"
			toggleBtn.BackgroundColor3 = Color3.fromRGB(0, 255, 140)
			buy() task.wait(0.4) equip() startFly()
		else
			toggleBtn.Text = "FLY OFF"
			toggleBtn.BackgroundColor3 = Color3.fromRGB(0, 180, 180)
			stopFly()
		end
	end)

	closeFly.MouseButton1Click:Connect(function()
		enabled = false
		stopFly()
		flyGui:Destroy()
	end)

	if pl.Character then updateChar() end
end)

-- === анти кик === --
local antiKickToggle = createToggle(contentArea.Settings, "Anti Kick", 10, function(state)
	if not state then
		createNotify("Anti Kick disabled! You can be kicked now.")
	else
		createNotify("Anti Kick enabled.")
	end
end)
antiKickToggle(true) -- включено сразу типо дефик

task.spawn(function()
	local hk = false
	for _, v in pairs(getgc(true)) do
		if typeof(v) == "table" then
			local fn = rawget(v, "observeTag")
			if typeof(fn) == "function" and not hk then
				hk = true
				hookfunction(fn, newcclosure(function(_, _)
					return {
						Disconnect = function() end,
						disconnect = function() end
					}
				end))
			end
		end
	end
end)

-- Закрытие и слайдшоу топчик:/
local minimized = false

closeBtn.MouseButton1Click:Connect(function()
	mainFrame.Visible = false
	createNotify("NyoaSs Unloading, Please wait:/")
	task.wait(6,3)
	screenGui:Destroy()
end)

minimizeBtn.MouseButton1Click:Connect(function()
	minimized = not minimized
	if minimized then
		TweenService:Create(mainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quint), {Size = UDim2.new(0,420,0,44)}):Play()
		minimizeBtn.Text = "+"
	else
		TweenService:Create(mainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quint), {Size = UDim2.new(0,420,0,300)}):Play()
		minimizeBtn.Text = "-"
	end
end)


createNotify("NyoaSs loaded! Enjoy :)")
