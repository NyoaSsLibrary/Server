-- Safe player reference
local Players = game:GetService("Players")
local Player = Players.LocalPlayer

if not Player then
    repeat task.wait() until Players.LocalPlayer
    Player = Players.LocalPlayer
end

-- Services cache
local Services = {
    Players = Players,
    CoreGui = game:GetService("CoreGui"),
    RunService = game:GetService("RunService"),
    UserInputService = game:GetService("UserInputService"),
    TweenService = game:GetService("TweenService"),
    ReplicatedStorage = game:GetService("ReplicatedStorage"),
    Workspace = game:GetService("Workspace")
}

-- Character setup
spawn(function()
    if Player.Character then
        _G.Char = Player.Character
        _G.Hum = Player.Character:FindFirstChildOfClass("Humanoid")
        _G.Root = Player.Character:FindFirstChild("HumanoidRootPart")
    end
    Player.CharacterAdded:Connect(function(char)
        _G.Char = char
        _G.Hum = char:FindFirstChildOfClass("Humanoid")
        _G.Root = char:FindFirstChild("HumanoidRootPart")
    end)
end)

-- Anti-debug
spawn(function()
    if debug and debug.getinfo then
        local info = debug.getinfo(2, "S")
        if info and info.source and string.find(info.source, "@") then
            pcall(function() Player:Kick("no dumping allowed") end)
        end
    end
end)

-- Dex / Spy detection
local badNames = {
    ExplorerSelections = true, EditAttributeButton = true, Dex = true, DEX = true,
    SimpleSpy = true, TurtleSpy = true, AwesomeExplorer = true, Hydroxide = true,
    RemoteSpy = true, RemoteBrowser = true, PropertiesFrame = true, ExplorerPanel = true
}

local badAssets = {
    ["rbxassetid://5054663650"] = true,
    ["rbxassetid://1427967925"] = true,
    ["rbxassetid://9887697099"] = true,
    ["rbxassetid://9887696628"] = true,
    ["rbxassetid://9896472554"] = true,
    ["rbxassetid://9887696922"] = true,
    ["rbxassetid://9887696242"] = true,
    ["rbxassetid://169476802"] = true,
    ["rbxassetid://5642383285"] = true,
    ["rbxassetid://1204397029"] = true
}

local badPhrases = {
    "clear logs", "exclude", "ignores remotes", "remotespy", "simple spy", "turtle spy",
    "remote spy", "invoke", "fire server", "block remote", "log remote", "spy remote"
}

local function isBad(obj)
    if not obj then return false end
    if badNames[obj.Name] then return true end
    if obj:IsA("ImageLabel") or obj:IsA("ImageButton") then
        local success, img = pcall(function() return obj.Image end)
        if success and badAssets[img] then return true end
    end
    local n = string.lower(obj.Name or "")
    if string.find(n, "dex") or string.find(n, "spy") then
        if not string.find(n, "index") then return true end
    end
    return false
end

local hits = 0
local last = 0

local function checkObj(o)
    if isBad(o) then
        local now = tick()
        if now - last > 5 then hits = 0 end
        last = now
        hits = hits + 1
        if hits >= 4 then pcall(function() Player:Kick("tool detected") end) end
    end
end

local function checkText(o)
    if o:IsA("TextLabel") or o:IsA("TextButton") or o:IsA("TextBox") then
        local success, t = pcall(function() return o.Text end)
        if success and t then
            local l = string.lower(t)
            for _, p in ipairs(badPhrases) do
                if string.find(l, p) then
                    pcall(function() Player:Kick("spy detected") end)
                    return
                end
            end
        end
    end
end

-- Print guard
spawn(function()
    local old = print
    local r = false
    print = function(...)
        if r then return old(...) end
        r = true
        for _, v in {...} do
            if type(v) == "string" then
                local l = string.lower(v)
                if string.find(l, "remotespy") or string.find(l, "blacklisted") then
                    r = false
                    pcall(function() Player:Kick("logger detected") end)
                    return
                end
            end
        end
        r = false
        old(...)
    end
end)

-- Watch new GUI
Services.CoreGui.DescendantAdded:Connect(function(o)
    spawn(function()
        checkObj(o)
        checkText(o)
    end)
end)

-- === Main Script === --

local pgui = Player:WaitForChild("PlayerGui")

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "NyoaSs"
screenGui.ResetOnSpawn = false
screenGui.IgnoreGuiInset = true
screenGui.Parent = pgui

-- драг
local function Drag(frame, handle)
    handle = handle or frame
    local dragging = false
    local dragInput
    local dragStart
    local startPos

    local function update(input)
        local delta = input.Position - dragStart
        frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end

    handle.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position

            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)

    handle.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            dragInput = input
        end
    end)

    Services.UserInputService.InputChanged:Connect(function(input)
        if dragging and (input == dragInput or input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            update(input)
        end
    end)
end

local obj = Services.Workspace:WaitForChild("Plots")

-- Notify
local function createNotify(text)
	local notify = Instance.new("Frame")
	notify.Size = UDim2.new(0,300,0,56)
	notify.Position = UDim2.new(0.5,-150,0,-70)
	notify.BackgroundColor3 = Color3.fromRGB(20,20,24)
	notify.BorderSizePixel = 0
	notify.ClipsDescendants = true
	notify.ZIndex = 999
	notify.Parent = screenGui
	Instance.new("UICorner",notify).CornerRadius = UDim.new(0,10)
	local stroke = Instance.new("UIStroke",notify)
	stroke.Color = Color3.new(1,1,1)
	stroke.Transparency = 0.8
	stroke.Thickness = 1

	local title = Instance.new("TextLabel")
	title.Size = UDim2.new(1,-50,0,22)
	title.Position = UDim2.new(0,12,0,8)
	title.BackgroundTransparency = 1
	title.Text = text
	title.TextColor3 = Color3.new(1,1,1)
	title.Font = Enum.Font.GothamBold
	title.TextSize = 15
	title.TextXAlignment = Enum.TextXAlignment.Left
	title.ZIndex = 999
	title.Parent = notify

	local author = Instance.new("TextLabel")
	author.Size = UDim2.new(1,-50,0,16)
	author.Position = UDim2.new(0,12,0,30)
	author.BackgroundTransparency = 1
	author.Text = "by Slivkineepy | Nyoa.Ss"
	author.TextColor3 = Color3.fromRGB(160,160,170)
	author.Font = Enum.Font.Gotham
	author.TextSize = 12
	author.TextXAlignment = Enum.TextXAlignment.Left
	author.ZIndex = 999
	author.Parent = notify

	local closeBtn = Instance.new("TextButton")
	closeBtn.Size = UDim2.new(0,24,0,24)
	closeBtn.Position = UDim2.new(1,-32,0,8)
	closeBtn.BackgroundTransparency = 1
	closeBtn.Text = "x"
	closeBtn.TextColor3 = Color3.fromRGB(180,180,180)
	closeBtn.Font = Enum.Font.GothamBold
	closeBtn.TextSize = 18
	closeBtn.ZIndex = 999
	closeBtn.Parent = notify

	local barBg = Instance.new("Frame")
	barBg.Size = UDim2.new(1,-24,0,3)
	barBg.Position = UDim2.new(0,12,1,-10)
	barBg.BackgroundColor3 = Color3.fromRGB(40,40,45)
	barBg.ZIndex = 999
	barBg.Parent = notify
	Instance.new("UICorner",barBg).CornerRadius = UDim.new(0,2)

	local bar = Instance.new("Frame")
	bar.Size = UDim2.new(1,0,1,0)
	bar.BackgroundColor3 = Color3.fromRGB(100,180,255)
	bar.ZIndex = 999
	bar.Parent = barBg
	Instance.new("UICorner",bar).CornerRadius = UDim.new(0,2)

	local shown = false
	local function hide()
		if shown then
			shown = false
			Services.TweenService:Create(notify,TweenInfo.new(0.4,Enum.EasingStyle.Quint),{Position=UDim2.new(0.5,-150,0,-70)}):Play()
			task.wait(0.45)
			notify:Destroy()
		end
	end
	local function show()
		shown = true
		Services.TweenService:Create(notify,TweenInfo.new(0.5,Enum.EasingStyle.Quint),{Position=UDim2.new(0.5,-150,0,12)}):Play()
		local t = Services.TweenService:Create(bar,TweenInfo.new(5,Enum.EasingStyle.Linear),{Size=UDim2.new(0,0,1,0)})
		t:Play()
		t.Completed:Wait()
		if shown then hide() end
	end
	closeBtn.MouseButton1Click:Connect(hide)
	task.spawn(show)
end

createNotify("NyoaSs loaded! Enjoy :)")

-- Xray
local xrayEnabled = false
local xrayConnection = nil

local function XrayOn(cur)
	if cur:FindFirstChild("AnimationController") then return end
	for _, v in pairs(cur:GetChildren()) do
		if v:IsA("BasePart") and not v.Parent:FindFirstChild("Humanoid") then
			v.LocalTransparencyModifier = 0.75
		end
		XrayOn(v)
	end
end

local function XrayOff(cur)
	if cur:FindFirstChild("AnimationController") then return end
	for _, v in pairs(cur:GetChildren()) do
		if v:IsA("BasePart") and not v.Parent:FindFirstChild("Humanoid") then
			v.LocalTransparencyModifier = 0
		end
		XrayOff(v)
	end
end

-- Base ESP
local PlotESP_Enabled = false
local PlotESP_Data = {}

local function CreatePlotESP(plot)
    if not plot or not plot:FindFirstChild("Spawn") or PlotESP_Data[plot] then return end
    local spawn = plot.Spawn

    if spawn:FindFirstChild("PlotESP_Billboard") then spawn.PlotESP_Billboard:Destroy() end

    local bill = Instance.new("BillboardGui")
    bill.Name = "PlotESP_Billboard"
    bill.Adornee = spawn
    bill.Size = UDim2.new(0,200,0,80)
    bill.StudsOffset = Vector3.new(0,25,0)
    bill.AlwaysOnTop = true
    bill.Parent = spawn

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(1,0,1,0)
    frame.BackgroundTransparency = 1
    frame.Parent = bill

    local owner = Instance.new("TextLabel")
    owner.Size = UDim2.new(1,0,0.5,0)
    owner.BackgroundTransparency = 1
    owner.TextColor3 = Color3.fromRGB(0,255,255)
    owner.Font = Enum.Font.Arcade
    owner.TextSize = 28
    owner.TextStrokeTransparency = 0
    owner.Text = plot:FindFirstChild("Owner") and "Owner: "..plot.Owner.Value or "Free"
    owner.Parent = frame

    local dist = Instance.new("TextLabel")
    dist.Size = UDim2.new(1,0,0.5,0)
    dist.Position = UDim2.new(0,0,0.5,0)
    dist.BackgroundTransparency = 1
    dist.TextColor3 = Color3.fromRGB(255,255,100)
    dist.Font = Enum.Font.Arcade
    dist.TextSize = 24
    dist.TextStrokeTransparency = 0
    dist.Parent = frame

    local conn = Services.RunService.Heartbeat:Connect(function()
        if Player.Character and Player.Character:FindFirstChild("HumanoidRootPart") then
            local d = (Player.Character.HumanoidRootPart.Position - spawn.Position).Magnitude
            dist.Text = string.format("%.0f studs", d)
            if plot:FindFirstChild("Owner") then owner.Text = "Owner: "..plot.Owner.Value end
        end
    end)

    PlotESP_Data[plot] = {bill=bill, owner=owner, dist=dist, conn=conn}
end

local function RemovePlotESP(plot)
    if not PlotESP_Data[plot] then return end
    if PlotESP_Data[plot].bill then PlotESP_Data[plot].bill:Destroy() end
    if PlotESP_Data[plot].conn then PlotESP_Data[plot].conn:Disconnect() end
    PlotESP_Data[plot] = nil
end

-- Plot Timer ESP
local PlotTimeESP_Data = {}

local function GetPlotTime(plot)
    if plot:FindFirstChild("Timer") then return plot.Timer.Value end
    if plot:FindFirstChild("TimeLeft") then return plot.TimeLeft.Value end
    if plot:FindFirstChild("Time") then return plot.Time.Value end
    if plot:GetAttribute("TimeLeft") then return plot:GetAttribute("TimeLeft") end
    if plot:GetAttribute("Timer") then return plot:GetAttribute("Timer") end
    return nil
end

local function CreateTimeESP(plot)
    if not plot or not plot:FindFirstChild("Spawn") or PlotTimeESP_Data[plot] then return end
    local spawn = plot.Spawn

    local bill = Instance.new("BillboardGui")
    bill.Name = "PlotTimeESP"
    bill.Adornee = spawn
    bill.Size = UDim2.new(0,200,0,40)
    bill.StudsOffset = Vector3.new(0,15,0)
    bill.AlwaysOnTop = true
    bill.Parent = spawn

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1,0,1,0)
    label.BackgroundTransparency = 1
    label.TextColor3 = Color3.fromRGB(100,255,100)
    label.Font = Enum.Font.Arcade
    label.TextSize = 30
    label.TextStrokeTransparency = 0
    label.Text = "Time: ∞"
    label.Parent = bill

    local conn = Services.RunService.Heartbeat:Connect(function()
        local t = GetPlotTime(plot)
        if t and t > 0 then
            local m = math.floor(t/60)
            local s = t%60
            label.Text = string.format("Time: %02d:%02d", m, s)
            label.TextColor3 = t < 60 and Color3.fromRGB(255,50,50) or Color3.fromRGB(100,255,100)
        else
            label.Text = "Time: ∞"
            label.TextColor3 = Color3.fromRGB(150,150,150)
        end
    end)

    PlotTimeESP_Data[plot] = {bill=bill, label=label, conn=conn}
end

local function RemoveTimeESP(plot)
    if not PlotTimeESP_Data[plot] then return end
    if PlotTimeESP_Data[plot].bill then PlotTimeESP_Data[plot].bill:Destroy() end
    if PlotTimeESP_Data[plot].conn then PlotTimeESP_Data[plot].conn:Disconnect() end
    PlotTimeESP_Data[plot] = nil
end

-- Float
local FloatGui_Enabled = false

local function OpenFloatGui()
    if FloatGui_Enabled then return end
    FloatGui_Enabled = true

    local RunS = Services.RunService
    local pgui = Player:WaitForChild("PlayerGui")

    local gui = Instance.new("ScreenGui")
    gui.Name = "NyoaSs_FloatGui"
    gui.ResetOnSpawn = false
    gui.Parent = pgui

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0, 140, 0, 44)
    frame.Position = UDim2.new(0.02, 0, 0.33, 0)
    frame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    frame.Active = true
    frame.Draggable = true
    frame.Parent = gui
    Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 10)

    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, -12, 1, -12)
    btn.Position = UDim2.new(0, 6, 0, 6)
    btn.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    btn.Text = "Float: OFF"
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.TextScaled = true
    btn.Font = Enum.Font.GothamBold
    btn.Parent = frame
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 8)

    local close = Instance.new("TextButton")
    close.Size = UDim2.new(0, 26, 0, 26)
    close.Position = UDim2.new(1, -16, 0, -10)
    close.BackgroundColor3 = Color3.fromRGB(190, 30, 30)
    close.Text = "X"
    close.TextColor3 = Color3.new(1, 1, 1)
    close.TextScaled = true
    close.Font = Enum.Font.GothamBold
    close.Parent = frame
    Instance.new("UICorner", close).CornerRadius = UDim.new(0, 8)

    local enabled = false
    local floatPart, bodyVel, con

    local function start()
        if enabled then return end
        enabled = true
        btn.Text = "Float: ON"
        btn.BackgroundColor3 = Color3.fromRGB(0, 130, 200)

        local char = Player.Character or Player.CharacterAdded:Wait()
        local root = char:WaitForChild("HumanoidRootPart")
        local hum = char:WaitForChild("Humanoid")

        floatPart = Instance.new("Part")
        floatPart.Size = Vector3.new(4, 1, 4)
        floatPart.Transparency = 1
        floatPart.CanCollide = false
        floatPart.Anchored = false
        floatPart.Massless = true
        floatPart.Parent = workspace

        local weld = Instance.new("Weld")
        weld.Part0 = root
        weld.Part1 = floatPart
        weld.C0 = CFrame.new(0, -3.5, 0)
        weld.Parent = floatPart

        bodyVel = Instance.new("BodyVelocity")
        bodyVel.MaxForce = Vector3.new(0, 99999, 0)
        bodyVel.P = 3000
        bodyVel.Velocity = Vector3.new(0, 0, 0)
        bodyVel.Parent = floatPart

        con = RunS.Stepped:Connect(function()
            if not enabled or hum.Health <= 0 then return end
            local state = hum:GetState()
            local inAir = state == Enum.HumanoidStateType.Freefall or state == Enum.HumanoidStateType.FallingDown or state == Enum.HumanoidStateType.Jumping
            local ray = workspace:Raycast(root.Position, Vector3.new(0, -5, 0))
            local onGround = ray ~= nil
            if inAir or not onGround then
                bodyVel.Velocity = Vector3.new(0, -3.2, 0)
            else
                bodyVel.Velocity = Vector3.new(0, 0, 0)
            end
        end)
    end

    local function stop()
        enabled = false
        btn.Text = "Float: OFF"
        btn.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
        if floatPart then floatPart:Destroy() end
        if con then con:Disconnect() end
    end

    btn.MouseButton1Click:Connect(function()
        if enabled then stop() else start() end
    end)

    close.MouseButton1Click:Connect(function()
        stop()
        gui:Destroy()
        FloatGui_Enabled = false
    end)

    Player.CharacterAdded:Connect(function()
        task.wait(1)
        if enabled then
            stop()
            task.wait(0.1)
            start()
        end
    end)
end

-- NyoaFly
local NyoaFly_Enabled = false

local function OpenNyoaFly()
    if NyoaFly_Enabled then return end
    NyoaFly_Enabled = true

    local RunS = Services.RunService
    local pgui = Player:WaitForChild("PlayerGui")

    local gui = Instance.new("ScreenGui")
    gui.Name = "NyoaSsFly"
    gui.ResetOnSpawn = false
    gui.Parent = pgui

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0,140,0,44)
    frame.Position = UDim2.new(0.02,0,0.33,0)
    frame.BackgroundColor3 = Color3.fromRGB(15,15,15)
    frame.Active = true
    frame.Draggable = true
    frame.Parent = gui
    Instance.new("UICorner",frame).CornerRadius = UDim.new(0,10)

    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1,-12,1,-12)
    btn.Position = UDim2.new(0,6,0,6)
    btn.BackgroundColor3 = Color3.fromRGB(35,35,35)
    btn.Text = "NyoaSs Fly: OFF"
    btn.TextColor3 = Color3.new(1,1,1)
    btn.TextScaled = true
    btn.Font = Enum.Font.GothamBold
    btn.Parent = frame
    Instance.new("UICorner",btn).CornerRadius = UDim.new(0,8)

    local close = Instance.new("TextButton")
    close.Size = UDim2.new(0,26,0,26)
    close.Position = UDim2.new(1,-16,0,-10)
    close.BackgroundColor3 = Color3.fromRGB(190,30,30)
    close.Text = "X"
    close.TextColor3 = Color3.new(1,1,1)
    close.TextScaled = true
    close.Font = Enum.Font.GothamBold
    close.Parent = frame
    Instance.new("UICorner",close).CornerRadius = UDim.new(0,8)

    local flying = false
    local conn = nil
    local speed = 28.5

    local function getHRP()
        return Player.Character and Player.Character:FindFirstChild("HumanoidRootPart")
    end

    local function start()
        if flying then return end
        flying = true
        btn.Text = "NyoaSs Fly: ON"
        btn.BackgroundColor3 = Color3.fromRGB(0,170,255)

        conn = RunS.Heartbeat:Connect(function()
            local hrp = getHRP()
            if hrp and flying then
                hrp.Velocity = workspace.CurrentCamera.CFrame.LookVector * speed
            end
        end)
    end

    local function stop()
        if not flying then return end
        flying = false
        btn.Text = "NyoaSs Fly: OFF"
        btn.BackgroundColor3 = Color3.fromRGB(35,35,35)
        if conn then conn:Disconnect() end
        local hrp = getHRP()
        if hrp then hrp.Velocity = Vector3.zero end
    end

    btn.MouseButton1Click:Connect(function()
        if flying then stop() else start() end
    end)

    close.MouseButton1Click:Connect(function()
        stop()
        gui:Destroy()
        NyoaFly_Enabled = false
    end)

    Player.CharacterAdded:Connect(function()
        task.wait(0.3)
        if flying then
            stop()
            task.wait(0.1)
            start()
        end
    end)

    Player.CharacterRemoving:Connect(stop)
end

-- NyoaBoost
local NyoaBoost_Enabled = false

local function OpenNyoaBoost()
    if NyoaBoost_Enabled then return end
    NyoaBoost_Enabled = true

    local RunS = Services.RunService
    local pgui = Player:WaitForChild("PlayerGui")

    local gui = Instance.new("ScreenGui")
    gui.Name = "NyoaSsBoost"
    gui.ResetOnSpawn = false
    gui.Parent = pgui

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0,140,0,44)
    frame.Position = UDim2.new(0.02,0,0.33,0)
    frame.BackgroundColor3 = Color3.fromRGB(15,15,15)
    frame.Active = true
    frame.Draggable = true
    frame.Parent = gui
    Instance.new("UICorner",frame).CornerRadius = UDim.new(0,10)

    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1,-12,1,-12)
    btn.Position = UDim2.new(0,6,0,6)
    btn.BackgroundColor3 = Color3.fromRGB(35,35,35)
    btn.Text = "Nyoa.Ss Boost: OFF"
    btn.TextColor3 = Color3.new(1,1,1)
    btn.TextScaled = true
    btn.Font = Enum.Font.GothamBold
    btn.Parent = frame
    Instance.new("UICorner",btn).CornerRadius = UDim.new(0,8)

    local close = Instance.new("TextButton")
    close.Size = UDim2.new(0,26,0,26)
    close.Position = UDim2.new(1,-16,0,-10)
    close.BackgroundColor3 = Color3.fromRGB(190,30,30)
    close.Text = "X"
    close.TextColor3 = Color3.new(1,1,1)
    close.TextScaled = true
    close.Font = Enum.Font.GothamBold
    close.Parent = frame
    Instance.new("UICorner",close).CornerRadius = UDim.new(0,8)

    local running = false
    local conn = nil
    local speed = 28.5

    local function getHRP()
        return Player.Character and Player.Character:FindFirstChild("HumanoidRootPart")
    end

    local function start()
        if running then return end
        running = true
        btn.Text = "Nyoa.Ss Boost: ON"
        btn.BackgroundColor3 = Color3.fromRGB(0,170,255)

        conn = RunS.Heartbeat:Connect(function()
            local hrp = getHRP()
            if not hrp or not running then return end
            local direction = workspace.CurrentCamera.CFrame.LookVector * Vector3.new(1,0,1)
            if direction.Magnitude > 0 then
                direction = direction.Unit
                hrp.Velocity = Vector3.new(direction.X * speed, hrp.Velocity.Y, direction.Z * speed)
            end
        end)
    end

    local function stop()
        if not running then return end
        running = false
        btn.Text = "Nyoa.Ss Boost: OFF"
        btn.BackgroundColor3 = Color3.fromRGB(35,35,35)
        if conn then conn:Disconnect() end
        local hrp = getHRP()
        if hrp then hrp.Velocity = Vector3.new(0, hrp.Velocity.Y, 0) end
    end

    btn.MouseButton1Click:Connect(function()
        if running then stop() else start() end
    end)

    close.MouseButton1Click:Connect(function()
        stop()
        gui:Destroy()
        NyoaBoost_Enabled = false
    end)

    Player.CharacterAdded:Connect(function()
        task.wait(0.3)
        if running then
            stop()
            task.wait(0.1)
            start()
        end
    end)

    Player.CharacterRemoving:Connect(stop)
end

-- Grapple Fly
local NyoaFlyGrapple_Enabled = false

local function OpenNyoaFlyGrapple()
    if NyoaFlyGrapple_Enabled then return end
    NyoaFlyGrapple_Enabled = true

    local RS = Services.ReplicatedStorage
    local RunS = Services.RunService
    local pgui = Player:WaitForChild("PlayerGui")

    local gui = Instance.new("ScreenGui")
    gui.Name = "NyoaSsGrappleFly"
    gui.ResetOnSpawn = false
    gui.Parent = pgui

    local frame = Instance.new("Frame",gui)
    frame.Size = UDim2.new(0,140,0,44)
    frame.Position = UDim2.new(0.02,0,0.33,0)
    frame.BackgroundColor3 = Color3.fromRGB(15,15,15)
    frame.Active = true
    frame.Draggable = true
    Instance.new("UICorner",frame).CornerRadius = UDim.new(0,10)

    local btn = Instance.new("TextButton",frame)
    btn.Size = UDim2.new(1,-12,1,-12)
    btn.Position = UDim2.new(0,6,0,6)
    btn.BackgroundColor3 = Color3.fromRGB(35,35,35)
    btn.Text = "NyoaSsGrapple Fly: OFF"
    btn.TextColor3 = Color3.new(1,1,1)
    btn.TextScaled = true
    btn.Font = Enum.Font.GothamBold
    btn.Parent = frame
    Instance.new("UICorner",btn).CornerRadius = UDim.new(0,8)

    local close = Instance.new("TextButton",frame)
    close.Size = UDim2.new(0,26,0,26)
    close.Position = UDim2.new(1,-16,0,-10)
    close.BackgroundColor3 = Color3.fromRGB(190,30,30)
    close.Text = "X"
    close.TextColor3 = Color3.new(1,1,1)
    close.TextScaled = true
    close.Font = Enum.Font.GothamBold
    close.Parent = frame
    Instance.new("UICorner",close).CornerRadius = UDim.new(0,8)

    local enabled = false
    local conn = nil
    local flySpeed = 130
    local item = "Grapple Hook"
    local useRE = RS:WaitForChild("Packages",10):WaitForChild("Net",10):WaitForChild("RE/UseItem",10)
    local args = {0.10267777442932129}

    local function buy() pcall(function() RS.Packages.Net["RF/CoinsShopService/RequestBuy"]:InvokeServer(item) end) end
    local function equip() if Player.Character then local t = Player.Character:FindFirstChild(item) or Player.Backpack:FindFirstChild(item) if t then t.Parent = Player.Character end end end
    local function fake() if Player.Character and Player.Character:FindFirstChild(item) then pcall(function() useRE:FireServer(unpack(args)) end) end end

    local function start()
        if enabled then return end
        enabled = true
        btn.Text = "NyoaSsGrapple Fly: ON"
        btn.BackgroundColor3 = Color3.fromRGB(0,170,255)

        buy()
        task.wait(0.5)
        equip()

        conn = RunS.Heartbeat:Connect(function()
            local hrp = Player.Character and Player.Character:FindFirstChild("HumanoidRootPart")
            if hrp and enabled then
                fake()
                hrp.Velocity = workspace.CurrentCamera.CFrame.LookVector * flySpeed
            end
        end)
    end

    local function stop()
        if not enabled then return end
        enabled = false
        btn.Text = "NyoaSsGrapple Fly: OFF"
        btn.BackgroundColor3 = Color3.fromRGB(35,35,35)
        if conn then conn:Disconnect() conn = nil end
        local hrp = Player.Character and Player.Character:FindFirstChild("HumanoidRootPart")
        if hrp then hrp.Velocity = Vector3.zero end
    end

    btn.MouseButton1Click:Connect(function()
        if enabled then stop() else start() end
    end)

    close.MouseButton1Click:Connect(function()
        stop()
        gui:Destroy()
        NyoaFlyGrapple_Enabled = false
    end)

    Player.CharacterAdded:Connect(function()
        task.wait(1)
        if enabled then
            stop()
            task.wait(0.1)
            start()
        end
    end)

    Player.CharacterRemoving:Connect(stop)

    if Player.Character then
        Player.Character:WaitForChild("HumanoidRootPart")
    end
end

-- Invisible
local Invisible_Enabled = false

local function OpenInvisible()
    if Invisible_Enabled then return end
    Invisible_Enabled = true

    local camera = workspace.CurrentCamera
    local pgui = Player:WaitForChild("PlayerGui")

    local gui = Instance.new("ScreenGui", pgui)
    gui.ResetOnSpawn = false
    gui.Name = "InvisibleGUI"

    local frame = Instance.new("Frame", gui)
    frame.Size = UDim2.new(0,140,0,44)
    frame.Position = UDim2.new(0.02,0,0.33,0)
    frame.BackgroundColor3 = Color3.fromRGB(15,15,15)
    frame.Active = true
    frame.Draggable = true
    Instance.new("UICorner",frame).CornerRadius = UDim.new(0,10)

    local btn = Instance.new("TextButton", frame)
    btn.Size = UDim2.new(1,-12,1,-12)
    btn.Position = UDim2.new(0,6,0,6)
    btn.BackgroundColor3 = Color3.fromRGB(35,35,35)
    btn.Text = "Invisible: OFF"
    btn.TextColor3 = Color3.new(1,1,1)
    btn.TextScaled = true
    btn.Font = Enum.Font.GothamBold
    btn.Parent = frame
    Instance.new("UICorner",btn).CornerRadius = UDim.new(0,8)

    local close = Instance.new("TextButton", frame)
    close.Size = UDim2.new(0,26,0,26)
    close.Position = UDim2.new(1,-16,0,-10)
    close.BackgroundColor3 = Color3.fromRGB(190,30,30)
    close.Text = "X"
    close.TextColor3 = Color3.new(1,1,1)
    close.TextScaled = true
    close.Font = Enum.Font.GothamBold
    close.Parent = frame
    Instance.new("UICorner",close).CornerRadius = UDim.new(0,8)

    local enabled = false

    local function toggleInvisible(state)
        local char = Player.Character or Player.CharacterAdded:Wait()
        local humanoid = char:FindFirstChildOfClass("Humanoid")
        local hrp = char:FindFirstChild("HumanoidRootPart")
        if not humanoid or not hrp then return end

        if state then
            local camCFrame = camera.CFrame
            camera.CameraType = Enum.CameraType.Scriptable
            camera.CFrame = camCFrame
            for _, part in pairs(char:GetDescendants()) do
                if part:IsA("BasePart") then part.Anchored = false end
            end
            humanoid.PlatformStand = false
            for _, part in pairs(char:GetDescendants()) do
                if part:IsA("BasePart") then part.CanCollide = false end
            end
            char:PivotTo(hrp.CFrame - Vector3.new(0,70,0))
            task.wait(0.1)
            for _, part in pairs(char:GetDescendants()) do
                if part:IsA("BasePart") then part.Anchored = true end
            end
            humanoid.PlatformStand = true
            task.wait(1.5)
            for _, part in pairs(char:GetDescendants()) do
                if part:IsA("BasePart") then part.Anchored = false end
            end
            humanoid.PlatformStand = false
            for _, part in pairs(char:GetDescendants()) do
                if part:IsA("BasePart") then part.CanCollide = false end
            end
            char:PivotTo(hrp.CFrame - Vector3.new(0,70,0))
            task.wait(0.1)
            for _, part in pairs(char:GetDescendants()) do
                if part:IsA("BasePart") then part.Anchored = true end
            end
            humanoid.PlatformStand = true
            camera.CameraType = Enum.CameraType.Custom
        else
            for _, part in pairs(char:GetDescendants()) do
                if part:IsA("BasePart") then part.Anchored = false end
            end
            humanoid.PlatformStand = false
            for _, part in pairs(char:GetDescendants()) do
                if part:IsA("BasePart") then part.CanCollide = true end
            end
            camera.CameraType = Enum.CameraType.Custom
        end
    end

    local function start()
        if enabled then return end
        enabled = true
        btn.Text = "Invisible: ON"
        btn.BackgroundColor3 = Color3.fromRGB(0,130,200)
        toggleInvisible(true)
    end

    local function stop()
        if not enabled then return end
        enabled = false
        btn.Text = "Invisible: OFF"
        btn.BackgroundColor3 = Color3.fromRGB(35,35,35)
        toggleInvisible(false)
    end

    btn.MouseButton1Click:Connect(function()
        if enabled then stop() else start() end
    end)

    close.MouseButton1Click:Connect(function()
        stop()
        gui:Destroy()
        Invisible_Enabled = false
    end)

    Player.CharacterAdded:Connect(function()
        task.wait(1)
        if enabled then
            stop()
            task.wait(0.1)
            start()
        end
    end)
end

-- Best Pet ESP
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer

local brainrotEspEnabled = false
local activeBestBrainrotESPs = {}
local heartbeatConn = nil
local refreshConn = nil

local function parseNumber(txt)
    local cleaned = txt:gsub(',',''):gsub('%s+',''):gsub('%$','')
    local num,suffix = cleaned:match('(%d+%.?%d*)([kKmMb]?)%/s')
    if not num then return nil end
    local value = tonumber(num)
    if not value then return nil end
    suffix = suffix:lower()
    if suffix == 'k' then value = value * 1e3
    elseif suffix == 'm' then value = value * 1e6
    elseif suffix == 'b' then value = value * 1e9 end
    return value
end

local function getRainbowColor()
    local t = tick() * 2
    local r = math.floor(math.sin(t) * 127 + 128)
    local g = math.floor(math.sin(t + 2) * 127 + 128)
    local b = math.floor(math.sin(t + 4) * 127 + 128)
    return Color3.fromRGB(r, g, b)
end

local function getColorFromModel(model, labelText)
    local modelName = (model.Name or ''):lower()
    local text = (labelText or ''):lower()
    local fullText = modelName..' '..text
    if fullText:find('gold') then return Color3.fromRGB(255,215,0)
    elseif fullText:find('diamond') then return Color3.fromRGB(0,170,255)
    elseif fullText:find('rainbow') then return 'rainbow'
    elseif fullText:find('lava') then return Color3.fromRGB(255,69,0)
    elseif fullText:find('bloodrot') then return Color3.fromRGB(139,0,0)
    elseif fullText:find('candy') then return Color3.fromRGB(255,105,180)
    elseif fullText:find('galaxy') then return Color3.fromRGB(170,0,255)
    elseif fullText:find('yin yang') then return Color3.fromRGB(255,255,255)
    elseif fullText:find('chocolate') then return Color3.fromRGB(139,69,19)
    elseif fullText:find('pollinated') then return Color3.fromRGB(255,255,0)
    elseif fullText:find('frozen') then return Color3.fromRGB(173,216,230)
    else return Color3.fromRGB(170, 0, 255) end
end

local function createESP(model, displayText)
    local color = getColorFromModel(model, displayText)
    local highlight = Instance.new('Highlight')
    highlight.Name = 'BrainrotESPHighlight'
    highlight.Adornee = model
    highlight.FillTransparency = 0.6
    highlight.OutlineTransparency = 0
    if color ~= 'rainbow' then
        highlight.FillColor = color
        highlight.OutlineColor = color
    end
    highlight.Parent = Workspace

    local part = model.PrimaryPart or model:FindFirstChildWhichIsA('BasePart')
    if not part then return highlight, nil, nil, nil end

    local tag = Instance.new('BillboardGui')
    tag.Name = 'BrainrotESPTag'
    tag.Size = UDim2.new(0, 200, 0, 50)
    tag.AlwaysOnTop = true
    tag.StudsOffset = Vector3.new(0, 8, 0)
    tag.Adornee = part
    tag.Parent = Workspace

    local label = Instance.new('TextLabel')
    label.Name = 'NameText'
    label.Size = UDim2.new(1, 0, 1, 0)
    label.BackgroundTransparency = 1
    label.Text = displayText or model.Name
    label.TextStrokeTransparency = 0.5
    label.TextScaled = true
    label.Font = Enum.Font.GothamBold
    label.TextColor3 = (color == 'rainbow') and getRainbowColor() or color
    label.Parent = tag

    local line = Instance.new('Beam')
    line.Name = 'BrainrotLine'
    line.Color = ColorSequence.new(getRainbowColor())
    line.Width0 = 0.5
    line.Width1 = 0.5
    line.Transparency = NumberSequence.new(0)
    line.FaceCamera = true
    line.Parent = Workspace

    local startAttachment = Instance.new('Attachment')
    startAttachment.Name = 'LineStart'
    startAttachment.Parent = Workspace.Terrain

    local endAttachment = Instance.new('Attachment')
    endAttachment.Name = 'LineEnd'
    endAttachment.Parent = part
    endAttachment.Position = Vector3.new(0, 0, 0)

    line.Attachment0 = startAttachment
    line.Attachment1 = endAttachment

    return highlight, tag, label, line
end

local function isMyPlot(plot)
    local sign = plot:FindFirstChild("PlotSign")
    return sign and sign:FindFirstChild("YourBase") and sign.YourBase.Enabled
end

local function getBestBrainrots()
    local maxValue = -1
    local bestLabel = nil
    if not Workspace:FindFirstChild('Plots') then return {} end

    for _, plot in pairs(Workspace.Plots:GetChildren()) do
        if isMyPlot(plot) then continue end

        for _, obj in pairs(plot:GetDescendants()) do
            if obj:IsA('TextLabel') then
                local txt = obj.Text or ''
                if txt:find('/') and txt:lower():find('s') then
                    local val = parseNumber(txt)
                    if val and val > maxValue then
                        maxValue = val
                        bestLabel = obj
                    end
                end
            end
        end
    end

    local results = {}
    if bestLabel then
        local model = bestLabel:FindFirstAncestorOfClass('Model')
        if model then table.insert(results, {model, bestLabel.Text}) end
    end
    return results
end

local function clearESP(model)
    local esp = activeBestBrainrotESPs[model]
    if esp then
        for _, obj in pairs(esp) do
            if typeof(obj) == "Instance" then obj:Destroy()
            elseif typeof(obj) == "RBXScriptConnection" then obj:Disconnect() end
        end
        activeBestBrainrotESPs[model] = nil
    end
end

local function startBrainrotEsp()
    if brainrotEspEnabled then return end
    brainrotEspEnabled = true

    heartbeatConn = RunService.Heartbeat:Connect(function()
        local bestModels = getBestBrainrots()
        local newSet = {}

        for _, data in ipairs(bestModels) do
            local model, labelText = data[1], data[2]
            if model and model.Parent then
                newSet[model] = true

                if activeBestBrainrotESPs[model] then
                    local esp = activeBestBrainrotESPs[model]
                    local part = model.PrimaryPart or model:FindFirstChildWhichIsA('BasePart')
                    if part and esp[2] then esp[2].Adornee = part end

                    local color = getColorFromModel(model, labelText)
                    if color == 'rainbow' then
                        local rainbow = getRainbowColor()
                        esp[3].TextColor3 = rainbow
                        esp[1].FillColor = rainbow
                        esp[1].OutlineColor = rainbow
                    else
                        esp[3].TextColor3 = color
                        esp[1].FillColor = color
                        esp[1].OutlineColor = color
                    end

                    if esp[3].Text ~= labelText then esp[3].Text = labelText end
                else
                    local highlight, tag, label, line = createESP(model, labelText)
                    local startAttachment = line.Attachment0
                    local endAttachment = line.Attachment1
                    local part = model.PrimaryPart or model:FindFirstChildWhichIsA('BasePart')

                    local conn = RunService.Heartbeat:Connect(function()
                        if not model.Parent then clearESP(model) conn:Disconnect() return end

                        line.Color = ColorSequence.new(getRainbowColor())

                        local char = player.Character
                        if char and char:FindFirstChild('Head') then
                            local head = char.Head
                            local headPosition = head.Position
                            local brainrotPos = part.Position
                            local distance = (headPosition - brainrotPos).Magnitude

                            startAttachment.Position = headPosition

                            local maxDistance = 100
                            local widthMultiplier = math.max(0.2, math.min(1, 1 - (distance / maxDistance)))
                            line.Width0 = 0.8 * widthMultiplier
                            line.Width1 = 0.8 * widthMultiplier
                        end
                    end)

                    activeBestBrainrotESPs[model] = {highlight, tag, label, line, startAttachment, endAttachment, conn}
                end
            end
        end

        for model in pairs(activeBestBrainrotESPs) do
            if not newSet[model] or not model.Parent then
                clearESP(model)
            end
        end
    end)

    refreshConn = spawn(function()
        while brainrotEspEnabled do
            wait(5)
            for model in pairs(activeBestBrainrotESPs) do
                clearESP(model)
            end
        end
    end)
end

local function stopBrainrotEsp()
    if not brainrotEspEnabled then return end
    brainrotEspEnabled = false

    if heartbeatConn then heartbeatConn:Disconnect() heartbeatConn = nil end

    for model in pairs(activeBestBrainrotESPs) do
        clearESP(model)
    end
end

-- player esp
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local COLOR = Color3.fromRGB(255, 255, 255)
local TRANSPARENCY = 0.45
local ESP_NAME = "NyoaEsp_3D_BOX"

local espEnabled = false
local connections = {}

local function clear(char)
	for _, v in ipairs(char:GetChildren()) do
		if v.Name == ESP_NAME then
			v:Destroy()
		end
	end
end

local function createBox(char)
	if not char:FindFirstChild("HumanoidRootPart") then return end
	local hrp = char.HumanoidRootPart

	local box = Instance.new("BoxHandleAdornment")
	box.Name = ESP_NAME
	box.Adornee = hrp
	box.Size = Vector3.new(4.2, 6.2, 2.4)
	box.Color3 = COLOR
	box.Transparency = TRANSPARENCY
	box.AlwaysOnTop = true
	box.ZIndex = 10
	box.CFrame = CFrame.new()
	box.Parent = char
end

local function setup(player)
	if player == LocalPlayer then return end

	local function onChar(char)
		clear(char)
		createBox(char)
	end

	if player.Character then
		onChar(player.Character)
	end

	local conn = player.CharacterAdded:Connect(onChar)
	table.insert(connections, conn)
end

local function enableEsp()
	if espEnabled then return end
	espEnabled = true

	for _, p in ipairs(Players:GetPlayers()) do
		setup(p)
	end

	local playerConn = Players.PlayerAdded:Connect(setup)
	table.insert(connections, playerConn)
end

local function disableEsp()
	if not espEnabled then return end
	espEnabled = false

	for _, p in ipairs(Players:GetPlayers()) do
		if p.Character then
			clear(p.Character)
		end
	end

	for _, conn in ipairs(connections) do
		conn:Disconnect()
	end
	connections = {}
end

-- Friends GUI
local FriendsGUI_Enabled = false

local function OpenFriendsGUI()
    if FriendsGUI_Enabled then return end
    FriendsGUI_Enabled = true

    local ReplicatedStorage = Services.ReplicatedStorage
    local pgui = Player:WaitForChild("PlayerGui")

    local gui = Instance.new("ScreenGui")
    gui.Name = "NyoaSsFriendsToggle"
    gui.ResetOnSpawn = false
    gui.Parent = pgui

    local frame = Instance.new("Frame", gui)
    frame.Size = UDim2.new(0,140,0,44)
    frame.Position = UDim2.new(0.02,0,0.33,0)
    frame.BackgroundColor3 = Color3.fromRGB(15,15,15)
    frame.Active = true
    frame.Draggable = true
    Instance.new("UICorner",frame).CornerRadius = UDim.new(0,10)

    local btn = Instance.new("TextButton", frame)
    btn.Size = UDim2.new(1,-12,1,-12)
    btn.Position = UDim2.new(0,6,0,6)
    btn.BackgroundColor3 = Color3.fromRGB(35,35,35)
    btn.Text = "Allow Friends"
    btn.TextColor3 = Color3.new(1,1,1)
    btn.TextScaled = true
    btn.Font = Enum.Font.GothamBold
    btn.Parent = frame
    Instance.new("UICorner",btn).CornerRadius = UDim.new(0,8)

    local close = Instance.new("TextButton", frame)
    close.Size = UDim2.new(0,26,0,26)
    close.Position = UDim2.new(1,-16,0,-10)
    close.BackgroundColor3 = Color3.fromRGB(190,30,30)
    close.Text = "X"
    close.TextColor3 = Color3.new(1,1,1)
    close.TextScaled = true
    close.Font = Enum.Font.GothamBold
    close.Parent = frame
    Instance.new("UICorner",close).CornerRadius = UDim.new(0,8)

    local remote = ReplicatedStorage.Packages.Net["RE/PlotService/ToggleFriends"]

    btn.MouseButton1Click:Connect(function()
        remote:FireServer()
    end)

    close.MouseButton1Click:Connect(function()
        gui:Destroy()
        FriendsGUI_Enabled = false
    end)
end

-- Anti Ragdoll
local RagdollDesync_Enabled = false
local RagdollConnections = {}

local function EnableRagdollDesync()
    if RagdollDesync_Enabled then return end
    RagdollDesync_Enabled = true

    local ReplicatedStorage = Services.ReplicatedStorage
    local RunService = Services.RunService

    local char = Player.Character or Player.CharacterAdded:Wait()
    local hum = char:WaitForChild("Humanoid")
    local root = char:WaitForChild("HumanoidRootPart")

    for _, mod in ipairs(getloadedmodules()) do
        if mod.Name:lower():find("ragdoll") then
            local success, controller = pcall(require, mod)
            if success and type(controller) == "table" then
                if isreadonly(controller) then setreadonly(controller, false) end
                controller.Start = function() end
                controller.IsInRagdoll = function() return false end
                controller.ToggleControls = function() end
                setreadonly(controller, true)
            end
        end
    end

    local pkg = ReplicatedStorage:FindFirstChild("Packages")
    if pkg then
        local rag = pkg:FindFirstChild("Ragdoll")
        if rag then
            local remote = rag:FindFirstChild("Ragdoll")
            if remote then
                RagdollConnections.remote = remote.OnClientEvent:Connect(function() end)
            end
        end
    end

    RagdollConnections.heartbeat = RunService.Heartbeat:Connect(function()
        pcall(function()
            if hum:GetState() == Enum.HumanoidStateType.Physics then
                hum:ChangeState(Enum.HumanoidStateType.GettingUp)
            end
            workspace.CurrentCamera.CameraSubject = hum
            root.CanCollide = true
        end)
    end)

    RagdollConnections.descendant = char.DescendantAdded:Connect(function(obj)
        if obj:IsA("BallSocketConstraint") or obj:IsA("HingeConstraint") or obj:IsA("NoCollisionConstraint") then
            obj:Destroy()
        end
    end)

    RagdollConnections.charAdded = Player.CharacterAdded:Connect(function(newChar)
        char = newChar
        hum = newChar:WaitForChild("Humanoid")
        root = newChar:WaitForChild("HumanoidRootPart")
    end)
end

local function DisableRagdollDesync()
    if not RagdollDesync_Enabled then return end
    RagdollDesync_Enabled = false
    for _, conn in pairs(RagdollConnections) do
        if typeof(conn) == "RBXScriptConnection" then
            conn:Disconnect()
        end
    end
    RagdollConnections = {}
end

-- Anti Hit
local AntiHit_Enabled = false
local AntiHit_Connections = {}

local function EnableAntiHit()
    if AntiHit_Enabled then return end
    AntiHit_Enabled = true

    local RunService = Services.RunService

    local Character = Player.Character or Player.CharacterAdded:Wait()
    local Humanoid = Character:WaitForChild("Humanoid")

    Humanoid.BreakJointsOnDeath = false

    for _, Part in pairs(Character:GetDescendants()) do
        if Part:IsA("BasePart") then
            Part.CanCollide = false
            Part.Massless = false
            Part.Touched:Connect(function() end)
        end
    end

    AntiHit_Connections.Knockback = RunService.Stepped:Connect(function()
        if not AntiHit_Enabled then return end
        local root = Player.Character and Player.Character:FindFirstChild("HumanoidRootPart")
        if not root then return end

        for _, Obj in pairs(root:GetChildren()) do
            if Obj:IsA("BodyVelocity") or Obj:IsA("BodyMover") or Obj:IsA("VectorForce") then
                Obj:Destroy()
            end
        end

        local Vel = root.Velocity
        local Move = Humanoid.MoveDirection * Humanoid.WalkSpeed
        root.Velocity = Vector3.new(Move.X, Vel.Y, Move.Z)
    end)

    AntiHit_Connections.Respawn = Player.CharacterAdded:Connect(function(Char)
        task.wait()
        for _, Part in pairs(Char:GetDescendants()) do
            if Part:IsA("BasePart") then
                Part.CanCollide = false
                Part.Massless = false
            end
        end
    end)
end

local function DisableAntiHit()
    AntiHit_Enabled = false

    for _, Conn in pairs(AntiHit_Connections) do
        if Conn.Connected then
            Conn:Disconnect()
        end
    end
    AntiHit_Connections = {}

    local Char = Player.Character
    if Char then
        for _, Part in pairs(Char:GetDescendants()) do
            if Part:IsA("BasePart") then
                Part.CanCollide = true
            end
        end
    end
end

-- Anti effects
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Lighting = game:GetService("Lighting")
local player = Players.LocalPlayer
local camera = workspace.CurrentCamera

local gui = nil
local frame = nil
local btn = nil
local closebtn = nil

local controls = require(player:WaitForChild("PlayerScripts"):WaitForChild("PlayerModule")):GetControls()
local originalMoveFunction = nil

pcall(function()
    local charController = require(ReplicatedStorage:WaitForChild("Controllers"):WaitForChild("CharacterController"))
    if charController and charController.originalMoveFunction then
        originalMoveFunction = charController.originalMoveFunction
    end
end)

local enabled = false
local cleanLoop = nil
local fovConn = nil

local function cleanEffects()
    if camera.FieldOfView ~= 70 then
        camera.FieldOfView = 70
    end

    for _, effect in ipairs(Lighting:GetChildren()) do
        if effect:IsA("BlurEffect") or effect:IsA("PostEffect") or effect.Name:lower():find("bee") or effect.Name:lower():find("colorcorrection") then
            pcall(function() effect:Destroy() end)
        end
    end

    for _, sound in ipairs(player:GetDescendants()) do
        if sound:IsA("Sound") then
            local name = sound.Name:lower()
            if name:find("buzz") or name:find("boom") or name:find("boogie") or name:find("bump") or name:find("rumble") or name:find("quake") then
                pcall(function() sound:Stop() end)
            end
        end
    end

    if controls.moveFunction ~= originalMoveFunction and originalMoveFunction then
        controls.moveFunction = originalMoveFunction
    end
end

local function disableShakes()
    local shakeModule = nil

    local function safeRequire(mod)
        local success, result = pcall(require, mod)
        return success and result or nil
    end

    if ReplicatedStorage:FindFirstChild("Packages") and ReplicatedStorage.Packages:FindFirstChild("Shake") then
        shakeModule = safeRequire(ReplicatedStorage.Packages.Shake)
    end

    local function findShakePresets()
        for _, folder in ipairs({"Shared", "Modules", "Client", "SharedModules"}) do
            local f = ReplicatedStorage:FindFirstChild(folder)
            if f and f:FindFirstChild("ShakePresets") then
                return safeRequire(f.ShakePresets)
            end
        end
        if ReplicatedStorage:FindFirstChild("ShakePresets") then
            return safeRequire(ReplicatedStorage.ShakePresets)
        end
        return nil
    end

    local shakePresets = findShakePresets()

    if shakeModule then
        if typeof(shakeModule.new) == "function" then
            local oldNew = shakeModule.new
            shakeModule.new = function(...)
                local inst = oldNew(...)
                if typeof(inst.BindToRenderStep) == "function" then inst.BindToRenderStep = function() end end
                if typeof(inst.OnSignal) == "function" then inst.OnSignal = function() end end
                if typeof(inst.Start) == "function" then inst.Start = function() end end
                if typeof(inst.Stop) == "function" then inst.Stop = function() end end
                if typeof(inst.StopSustain) == "function" then inst.StopSustain = function() end end
                return inst
            end
        end
        if typeof(shakeModule.NextRenderName) == "function" then
            shakeModule.NextRenderName = function() return "__disabled_shake__" end
        end
    end

    local function disableInstances(tbl)
        if typeof(tbl) == "table" then
            for _, v in pairs(tbl) do
                if typeof(v) == "table" then
                    pcall(v.StopSustain, v)
                    pcall(v.Stop, v)
                    if typeof(v.BindToRenderStep) == "function" then v.BindToRenderStep = function() end end
                    if typeof(v.OnSignal) == "function" then v.OnSignal = function() end end
                    if typeof(v.Start) == "function" then v.Start = function() end end
                    if typeof(v.Update) == "function" then v.Update = function() end end
                end
            end
        end
    end

    if shakePresets then
        disableInstances(shakePresets)
        if typeof(shakePresets.BindShakeToCamera) == "function" then
            shakePresets.BindShakeToCamera = function() return function() end end
        end
    end
end

local function startAntiEffects()
    if enabled then return end
    enabled = true

    cleanEffects()
    disableShakes()
    camera.FieldOfView = 70

    cleanLoop = task.spawn(function()
        while task.wait(0.5) do
            if not enabled then break end
            cleanEffects()
            disableShakes()
        end
    end)

    fovConn = camera:GetPropertyChangedSignal("FieldOfView"):Connect(function()
        if enabled then
            camera.FieldOfView = 70
        end
    end)
end

local function stopAntiEffects()
    if not enabled then return end
    enabled = false

    if cleanLoop then task.cancel(cleanLoop) cleanLoop = nil end
    if fovConn then fovConn:Disconnect() fovConn = nil end
end

local function antiEffectsCreate()
    if gui then return end
    gui = Instance.new("ScreenGui")
    gui.Name = "AntiEffectsGUI"
    gui.ResetOnSpawn = false
    gui.Parent = player:WaitForChild("PlayerGui")

    frame = Instance.new("Frame")
    frame.Size = UDim2.new(0, 160, 0, 44)
    frame.Position = UDim2.new(0.02, 0, 0.33, 0)
    frame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    frame.Active = true
    frame.Draggable = true
    frame.Parent = gui
    Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 10)

    btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, -12, 1, -12)
    btn.Position = UDim2.new(0, 6, 0, 6)
    btn.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    btn.Text = "Anti Effects: OFF"
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.TextScaled = true
    btn.Font = Enum.Font.GothamBold
    btn.Parent = frame
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 8)

    closebtn = Instance.new("TextButton")
    closebtn.Size = UDim2.new(0, 26, 0, 26)
    closebtn.Position = UDim2.new(1, -16, 0, -10)
    closebtn.BackgroundColor3 = Color3.fromRGB(190, 30, 30)
    closebtn.Text = "X"
    closebtn.TextColor3 = Color3.new(1, 1, 1)
    closebtn.TextScaled = true
    closebtn.Font = Enum.Font.GothamBold
    closebtn.Parent = frame
    Instance.new("UICorner", closebtn).CornerRadius = UDim.new(0, 8)

    btn.MouseButton1Click:Connect(function()
        if enabled then
            stopAntiEffects()
            btn.Text = "Anti Effects: OFF"
            btn.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
        else
            startAntiEffects()
            btn.Text = "Anti Effects: ON"
            btn.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
        end
    end)

    closebtn.MouseButton1Click:Connect(function()
        stopAntiEffects()
        if gui then gui:Destroy() gui = nil end
    end)
end

local function antiEffectsDestroy()
    if gui then gui:Destroy() gui = nil end
end

local function antiEffectsStop()
    stopAntiEffects()
end

-- Auto Steal
local Players = game:GetService("Players")
local player = Players.LocalPlayer

local gui = nil
local frame = nil
local btn = nil
local closebtn = nil

_G.AutoStealAllEnabled = false

local function stealAll()
    local character = player.Character or player.CharacterAdded:Wait()
    if not character or not character:FindFirstChild("HumanoidRootPart") then return end
    local myPos = character.HumanoidRootPart.Position

    local closestPrompt = nil
    local closestDist = math.huge

    for _, obj in ipairs(workspace:GetDescendants()) do
        if obj:IsA("ProximityPrompt") and obj.ActionText == "Steal" and obj.ObjectText ~= nil then
            local attachment = obj.Parent
            if attachment and attachment:IsA("Attachment") then
                local dist = (myPos - attachment.WorldPosition).Magnitude
                if dist <= 20 and dist < closestDist then
                    closestDist = dist
                    closestPrompt = obj
                end
            end
        end
    end

    if closestPrompt then
        closestPrompt:InputHoldBegin()
    end
end

local function startAutoSteal()
    if _G.AutoStealAllEnabled then return end
    _G.AutoStealAllEnabled = true

    task.spawn(function()
        while task.wait(0.2) do
            if not _G.AutoStealAllEnabled then break end
            pcall(stealAll)
        end
    end)
end

local function stopAutoSteal()
    _G.AutoStealAllEnabled = false
end

local function autoStealCreate()
    if gui then return end
    gui = Instance.new("ScreenGui")
    gui.Name = "NearestAutoStealGUI"
    gui.ResetOnSpawn = false
    gui.Parent = player:WaitForChild("PlayerGui")

    frame = Instance.new("Frame")
    frame.Size = UDim2.new(0, 160, 0, 44)
    frame.Position = UDim2.new(0.02, 0, 0.33, 0)
    frame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    frame.Active = true
    frame.Draggable = true
    frame.Parent = gui
    Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 10)

    btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, -12, 1, -12)
    btn.Position = UDim2.new(0, 6, 0, 6)
    btn.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    btn.Text = "Nearest Auto Steal: OFF"
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.TextScaled = true
    btn.Font = Enum.Font.GothamBold
    btn.Parent = frame
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 8)

    closebtn = Instance.new("TextButton")
    closebtn.Size = UDim2.new(0, 26, 0, 26)
    closebtn.Position = UDim2.new(1, -16, 0, -10)
    closebtn.BackgroundColor3 = Color3.fromRGB(190, 30, 30)
    closebtn.Text = "X"
    closebtn.TextColor3 = Color3.new(1, 1, 1)
    closebtn.TextScaled = true
    closebtn.Font = Enum.Font.GothamBold
    closebtn.Parent = frame
    Instance.new("UICorner", closebtn).CornerRadius = UDim.new(0, 8)

    btn.MouseButton1Click:Connect(function()
        if _G.AutoStealAllEnabled then
            stopAutoSteal()
            btn.Text = "Auto Steal: OFF"
            btn.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
        else
            startAutoSteal()
            btn.Text = "Auto Steal: ON"
            btn.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
        end
    end)

    closebtn.MouseButton1Click:Connect(function()
        stopAutoSteal()
        if gui then gui:Destroy() gui = nil end
    end)
end

local function autoStealDestroy()
    if gui then gui:Destroy() gui = nil end
end

local function autoStealStop()
    stopAutoSteal()
end

-- infinity jump
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local player = Players.LocalPlayer

local gui = nil
local frame = nil
local btn = nil
local closebtn = nil

local infiniteJumpEnabled = false
local jumpMinForce = 50
local jumpMaxForce = 55
local jumpCooldown = 0.1
local lastJumpTime = 0

local humanoid = nil
local rootPart = nil

local function setupCharacter(char)
    humanoid = char:WaitForChild("Humanoid")
    rootPart = char:WaitForChild("HumanoidRootPart")
end

if player.Character then
    setupCharacter(player.Character)
end

player.CharacterAdded:Connect(setupCharacter)

local jumpConnection = nil

local function startInfiniteJump()
    if infiniteJumpEnabled then return end
    infiniteJumpEnabled = true

    jumpConnection = UserInputService.JumpRequest:Connect(function()
        if not humanoid or not rootPart then return end
        
        if tick() - lastJumpTime < jumpCooldown then return end
        
        local state = humanoid:GetState()
        if state == Enum.HumanoidStateType.Freefall or state == Enum.HumanoidStateType.Running or state == Enum.HumanoidStateType.Jumping then
            local force = math.random(jumpMinForce * 10, jumpMaxForce * 10) / 10
            rootPart.Velocity = Vector3.new(rootPart.Velocity.X, force, rootPart.Velocity.Z)
            lastJumpTime = tick()
        end
    end)
end

local function stopInfiniteJump()
    infiniteJumpEnabled = false
    if jumpConnection then
        jumpConnection:Disconnect()
        jumpConnection = nil
    end
end

local function infiniteJumpCreate()
    if gui then return end
    gui = Instance.new("ScreenGui")
    gui.Name = "InfiniteJumpGUI"
    gui.ResetOnSpawn = false
    gui.Parent = player:WaitForChild("PlayerGui")

    frame = Instance.new("Frame")
    frame.Size = UDim2.new(0, 160, 0, 44)
    frame.Position = UDim2.new(0.02, 0, 0.33, 0)
    frame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    frame.Active = true
    frame.Draggable = true
    frame.Parent = gui
    Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 10)

    btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, -12, 1, -12)
    btn.Position = UDim2.new(0, 6, 0, 6)
    btn.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    btn.Text = "Infinite Jump: OFF"
    btn.TextColor3 = Color3.new(1, 1, 1)
    btn.TextScaled = true
    btn.Font = Enum.Font.GothamBold
    btn.Parent = frame
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 8)

    closebtn = Instance.new("TextButton")
    closebtn.Size = UDim2.new(0, 26, 0, 26)
    closebtn.Position = UDim2.new(1, -16, 0, -10)
    closebtn.BackgroundColor3 = Color3.fromRGB(190, 30, 30)
    closebtn.Text = "X"
    closebtn.TextColor3 = Color3.new(1, 1, 1)
    closebtn.TextScaled = true
    closebtn.Font = Enum.Font.GothamBold
    closebtn.Parent = frame
    Instance.new("UICorner", closebtn).CornerRadius = UDim.new(0, 8)

    btn.MouseButton1Click:Connect(function()
        if infiniteJumpEnabled then
            stopInfiniteJump()
            btn.Text = "Infinite Jump: OFF"
            btn.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
        else
            startInfiniteJump()
            btn.Text = "Infinite Jump: ON"
            btn.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
        end
    end)

    closebtn.MouseButton1Click:Connect(function()
        stopInfiniteJump()
        if gui then gui:Destroy() gui = nil end
    end)
end

local function infiniteJumpDestroy()
    if gui then gui:Destroy() gui = nil end
end

local function infiniteJumpStop()
    stopInfiniteJump()
end

-- semi
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer

local gui,frame,btn,closebtn = nil,nil,nil,nil
local isSemiInvisible = false
local connections = {SemiInvisible = {}}
local clone,oldRoot,hip,animTrack,connection,characterConnection
local DEPTH_OFFSET = 0.09

local function toggleSemiInvisible(state)
	local LocalPlayer = player
	local function removeFolders()
		local playerName = LocalPlayer.Name
		local playerFolder = workspace:FindFirstChild(playerName)
		if not playerFolder then return end
		local doubleRig = playerFolder:FindFirstChild("DoubleRig")
		if doubleRig then doubleRig:Destroy() end
		local constraints = playerFolder:FindFirstChild("Constraints")
		if constraints then constraints:Destroy() end
		local childAddedConn = playerFolder.ChildAdded:Connect(function(child)
			if child.Name == "DoubleRig" or child.Name == "Constraints" then child:Destroy() end
		end)
		table.insert(connections.SemiInvisible,childAddedConn)
	end
	local function doClone()
		if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") and LocalPlayer.Character.Humanoid.Health > 0 then
			hip = LocalPlayer.Character.Humanoid.HipHeight
			oldRoot = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
			if not oldRoot or not oldRoot.Parent then return false end
			local tempParent = Instance.new("Model") tempParent.Parent = game
			LocalPlayer.Character.Parent = tempParent
			clone = oldRoot:Clone()
			clone.Parent = LocalPlayer.Character
			oldRoot.Parent = workspace.CurrentCamera
			clone.CFrame = oldRoot.CFrame
			LocalPlayer.Character.PrimaryPart = clone
			LocalPlayer.Character.Parent = workspace
			for _, v in pairs(LocalPlayer.Character:GetDescendants()) do
				if v:IsA("Weld") or v:IsA("Motor6D") then
					if v.Part0 == oldRoot then v.Part0 = clone end
					if v.Part1 == oldRoot then v.Part1 = clone end
				end
			end
			tempParent:Destroy()
			return true
		end
		return false
	end
	local function revertClone()
		if not oldRoot or not oldRoot:IsDescendantOf(workspace) or not LocalPlayer.Character or LocalPlayer.Character.Humanoid.Health <= 0 then return false end
		local tempParent = Instance.new("Model") tempParent.Parent = game
		LocalPlayer.Character.Parent = tempParent
		oldRoot.Parent = LocalPlayer.Character
		LocalPlayer.Character.PrimaryPart = oldRoot
		LocalPlayer.Character.Parent = workspace
		oldRoot.CanCollide = true
		for _, v in pairs(LocalPlayer.Character:GetDescendants()) do
			if v:IsA("Weld") or v:IsA("Motor6D") then
				if v.Part0 == clone then v.Part0 = oldRoot end
				if v.Part1 == clone then v.Part1 = clone end
			end
		end
		if clone then
			local oldPos = clone.CFrame
			clone:Destroy()
			clone = nil
			oldRoot.CFrame = oldPos
		end
		oldRoot = nil
		if LocalPlayer.Character and LocalPlayer.Character.Humanoid then LocalPlayer.Character.Humanoid.HipHeight = hip end
	end
	local function animationTrickery()
		if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") and LocalPlayer.Character.Humanoid.Health > 0 then
			local anim = Instance.new("Animation")
			anim.AnimationId = "http://www.roblox.com/asset/?id=18537363391"
			local humanoid = LocalPlayer.Character.Humanoid
			local animator = humanoid:FindFirstChild("Animator") or Instance.new("Animator",humanoid)
			animTrack = animator:LoadAnimation(anim)
			animTrack.Priority = Enum.AnimationPriority.Action4
			animTrack:Play(0,1,0)
			anim:Destroy()
			local animStoppedConn = animTrack.Stopped:Connect(function()
				if isSemiInvisible then animationTrickery() end
			end)
			table.insert(connections.SemiInvisible,animStoppedConn)
			task.delay(0,function()
				animTrack.TimePosition = 0.7
				task.delay(1,function() animTrack:AdjustSpeed(math.huge) end)
			end)
		end
	end
	local function enableSemiInvisible()
		if not LocalPlayer.Character or LocalPlayer.Character.Humanoid.Health <= 0 then return false end
		removeFolders()
		local success = doClone()
		if success then
			task.wait(0.1)
			animationTrickery()
			connection = RunService.PreSimulation:Connect(function(dt)
				if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") and LocalPlayer.Character.Humanoid.Health > 0 and oldRoot then
					local root = LocalPlayer.Character.PrimaryPart or LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
					if root then
						local cf = root.CFrame - Vector3.new(0,LocalPlayer.Character.Humanoid.HipHeight + (root.Size.Y/2)-1 + DEPTH_OFFSET,0)
						oldRoot.CFrame = cf * CFrame.Angles(math.rad(180),0,0)
						oldRoot.Velocity = root.Velocity
						oldRoot.CanCollide = false
					end
				end
			end)
			table.insert(connections.SemiInvisible,connection)
			characterConnection = LocalPlayer.CharacterAdded:Connect(function(newChar)
				if isSemiInvisible then
					if animTrack then animTrack:Stop() animTrack:Destroy() animTrack = nil end
					if connection then connection:Disconnect() end
					revertClone()
					removeFolders()
					isSemiInvisible = false
					for _, conn in ipairs(connections.SemiInvisible) do if conn then conn:Disconnect() end end
					connections.SemiInvisible = {}
				end
			end)
			table.insert(connections.SemiInvisible,characterConnection)
			return true
		end
		return false
	end
	local function disableSemiInvisible()
		if animTrack then animTrack:Stop() animTrack:Destroy() animTrack = nil end
		if connection then connection:Disconnect() end
		if characterConnection then characterConnection:Disconnect() end
		revertClone()
		removeFolders()
	end
	local function setupGodmode()
		local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
		local hum = char:WaitForChild("Humanoid")
		local mt = getrawmetatable(game)
		local oldNC = mt.__namecall
		local oldNI = mt.__newindex
		setreadonly(mt,false)
		mt.__namecall = newcclosure(function(self,...)
			local m = getnamecallmethod()
			if self == hum then
				if m == "ChangeState" and select(1,...) == Enum.HumanoidStateType.Dead then return end
				if m == "SetStateEnabled" then local st,en = ... if st == Enum.HumanoidStateType.Dead and en == true then return end end
				if m == "Destroy" then return end
			end
			if self == char and m == "BreakJoints" then return end
			return oldNC(self,...)
		end)
		mt.__newindex = newcclosure(function(self,k,v)
			if self == hum then
				if k == "Health" and type(v) == "number" and v <= 0 then return end
				if k == "MaxHealth" and type(v) == "number" and v < hum.MaxHealth then return end
				if k == "BreakJointsOnDeath" and v == true then return end
				if k == "Parent" and v == nil then return end
			end
			return oldNI(self,k,v)
		end)
		setreadonly(mt,true)
	end
	if state then
		removeFolders()
		setupGodmode()
		if enableSemiInvisible() then isSemiInvisible = true end
	else
		disableSemiInvisible()
		isSemiInvisible = false
		for _, conn in ipairs(connections.SemiInvisible) do if conn then conn:Disconnect() end end
		connections.SemiInvisible = {}
	end
end

local function semiInvisibleCreate()
	if gui then return end
	gui = Instance.new("ScreenGui")
	gui.Name = "SemiInvisibleGUI"
	gui.ResetOnSpawn = false
	gui.Parent = player:WaitForChild("PlayerGui")

	frame = Instance.new("Frame")
	frame.Size = UDim2.new(0,140,0,44)
	frame.Position = UDim2.new(0.02,0,0.33,0)
	frame.BackgroundColor3 = Color3.fromRGB(15,15,15)
	frame.Active = true
	frame.Draggable = true
	frame.Parent = gui
	Instance.new("UICorner",frame).CornerRadius = UDim.new(0,10)

	btn = Instance.new("TextButton")
	btn.Size = UDim2.new(1,-12,1,-12)
	btn.Position = UDim2.new(0,6,0,6)
	btn.BackgroundColor3 = Color3.fromRGB(35,35,35)
	btn.Text = "Semi Invisible: OFF"
	btn.TextColor3 = Color3.new(1,1,1)
	btn.TextScaled = true
	btn.Font = Enum.Font.GothamBold
	btn.Parent = frame
	Instance.new("UICorner",btn).CornerRadius = UDim.new(0,8)

	closebtn = Instance.new("TextButton")
	closebtn.Size = UDim2.new(0,26,0,26)
	closebtn.Position = UDim2.new(1,-16,0,-10)
	closebtn.BackgroundColor3 = Color3.fromRGB(190,30,30)
	closebtn.Text = "X"
	closebtn.TextColor3 = Color3.new(1,1,1)
	closebtn.TextScaled = true
	closebtn.Font = Enum.Font.GothamBold
	closebtn.Parent = frame
	Instance.new("UICorner",closebtn).CornerRadius = UDim.new(0,8)

	btn.MouseButton1Click:Connect(function()
		if isSemiInvisible then
			toggleSemiInvisible(false)
			btn.Text = "Semi Invisible: OFF"
			btn.BackgroundColor3 = Color3.fromRGB(35,35,35)
		else
			toggleSemiInvisible(true)
			btn.Text = "Semi Invisible: ON"
			btn.BackgroundColor3 = Color3.fromRGB(0,170,255)
		end
	end)

	closebtn.MouseButton1Click:Connect(function()
		toggleSemiInvisible(false)
		if gui then gui:Destroy() gui = nil end
	end)
end

local function semiInvisibleDestroy()
	if gui then gui:Destroy() gui = nil end
end

local function semiInvisibleStop()
	toggleSemiInvisible(false)
end

-- кик
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer

local KickAfterSteal = false
local oldFire

local args = {
    "7799aa8a-03f9-4df1-ab0f-b6df84f6b36c"
}

local targetRemote = ReplicatedStorage:WaitForChild("Packages")
    :WaitForChild("Net")
    :WaitForChild("RE/5c8f0dd0-0f9e-44ba-8f9b-197958b661ab")

local function enableKickAfterSteal()
    if KickAfterSteal then return end
    KickAfterSteal = true

    oldFire = hookfunction(targetRemote.FireServer, function(self, ...)
        local firedArgs = {...}

        if firedArgs[1] == args[1] then
            task.spawn(function()
                task.wait(1)
                player:Kick("You stole a brainrot")
            end)
        end

        return oldFire(self, ...)
    end)
end

local function disableKickAfterSteal()
    if not KickAfterSteal then return end
    KickAfterSteal = false
    if oldFire then
        hookfunction(targetRemote.FireServer, oldFire)
    end
end

-- Main Frame
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0,420,0,300)
mainFrame.Position = UDim2.new(0.5,-210,0.5,-150)
mainFrame.BackgroundColor3 = Color3.fromRGB(18,18,22)
mainFrame.ClipsDescendants = true
mainFrame.Parent = screenGui
Instance.new("UICorner",mainFrame).CornerRadius = UDim.new(0,10)
local mstroke = Instance.new("UIStroke",mainFrame)
mstroke.Color = Color3.new(1,1,1)
mstroke.Transparency = 0.85
mstroke.Thickness = 1

local titleBar = Instance.new("Frame")
titleBar.Size = UDim2.new(1,0,0,44)
titleBar.BackgroundColor3 = Color3.fromRGB(22,22,26)
titleBar.Parent = mainFrame
Instance.new("UICorner",titleBar).CornerRadius = UDim.new(0,10)

Drag(mainFrame, titleBar)

local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(0,300,1,0)
titleLabel.Position = UDim2.new(0,16,0,0)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "NyoaSs | discord.gg/WBYkWfPQC2"
titleLabel.TextColor3 = Color3.fromRGB(240,240,245)
titleLabel.Font = Enum.Font.GothamMedium
titleLabel.TextSize = 15
titleLabel.TextXAlignment = Enum.TextXAlignment.Left
titleLabel.Parent = titleBar

local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0,40,0,40)
closeBtn.Position = UDim2.new(1,-44,0,2)
closeBtn.BackgroundTransparency = 1
closeBtn.Text = "x"
closeBtn.TextColor3 = Color3.fromRGB(255,100,100)
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 26
closeBtn.ZIndex = 10
closeBtn.Parent = titleBar

local minimizeBtn = Instance.new("TextButton")
minimizeBtn.Size = UDim2.new(0,40,0,40)
minimizeBtn.Position = UDim2.new(1,-84,0,2)
minimizeBtn.BackgroundTransparency = 1
minimizeBtn.Text = "-"
minimizeBtn.TextColor3 = Color3.fromRGB(200,200,200)
minimizeBtn.Font = Enum.Font.Gotham
minimizeBtn.TextSize = 30
minimizeBtn.ZIndex = 10
minimizeBtn.Parent = titleBar

local contentContainer = Instance.new("Frame")
contentContainer.Size = UDim2.new(1,0,1,-44)
contentContainer.Position = UDim2.new(0,0,0,44)
contentContainer.BackgroundTransparency = 1
contentContainer.ClipsDescendants = true
contentContainer.Parent = mainFrame

local line1 = Instance.new("Frame")
line1.Size = UDim2.new(1,-20,0,1)
line1.Position = UDim2.new(0,10,0,0)
line1.BackgroundColor3 = Color3.new(1,1,1)
line1.BackgroundTransparency = 0.8
line1.Parent = contentContainer

local line2 = Instance.new("Frame")
line2.Size = UDim2.new(1,-20,0,1)
line2.Position = UDim2.new(0,10,0,48)
line2.BackgroundColor3 = Color3.new(1,1,1)
line2.BackgroundTransparency = 0.8
line2.Parent = contentContainer

local tabContainer = Instance.new("Frame")
tabContainer.Size = UDim2.new(1,-20,0,46)
tabContainer.Position = UDim2.new(0,10,0,2)
tabContainer.BackgroundTransparency = 1
tabContainer.Parent = contentContainer

-- Scrolling Content Area
local contentArea = Instance.new("ScrollingFrame")
contentArea.Size = UDim2.new(1,-20,1,-56)
contentArea.Position = UDim2.new(0,10,0,50)
contentArea.BackgroundTransparency = 1
contentArea.ScrollBarThickness = 6
contentArea.ScrollBarImageColor3 = Color3.fromRGB(100,180,255)
contentArea.AutomaticCanvasSize = Enum.AutomaticSize.Y
contentArea.CanvasPosition = Vector2.new(0,0)
contentArea.ScrollingDirection = Enum.ScrollingDirection.Y
contentArea.Parent = contentContainer

local pages = {
    Combat = Instance.new("Frame"),
    Visual = Instance.new("Frame"),
    Perform = Instance.new("Frame"),
    Misc = Instance.new("Frame"),
    Movement = Instance.new("Frame"),
    Setting = Instance.new("Frame")
}

for name, page in pairs(pages) do
    page.Name = name
    page.Size = UDim2.new(1,0,0,0)
    page.BackgroundTransparency = 1
    page.Visible = name == "Combat"
    page.AutomaticSize = Enum.AutomaticSize.Y
    page.Parent = contentArea

    local layout = Instance.new("UIListLayout")
    layout.Padding = UDim.new(0,8)
    layout.SortOrder = Enum.SortOrder.LayoutOrder
    layout.Parent = page
end

local tabOrder = {"Combat", "Visual", "Perform", "Misc", "Movement", "Setting"}
local tabButtons = {} 

for i, name in ipairs(tabOrder) do
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0,70,1,0)
    btn.Position = UDim2.new(0,(i-1)*70,0,0)  
    btn.BackgroundTransparency = 1
    btn.Text = name
    btn.TextColor3 = i==1 and Color3.new(1,1,1) or Color3.fromRGB(140,140,150)
    btn.Font = Enum.Font.GothamMedium
    btn.TextSize = 14
    btn.ZIndex = 5
    btn.Parent = tabContainer

    local ind = Instance.new("Frame")
    ind.Name = "Indicator"
    ind.Size = UDim2.new(0,54,0,2)
    ind.Position = UDim2.new(0.5,-27,1,-2)
    ind.BackgroundColor3 = Color3.new(1,1,1)
    ind.Visible = i==1
    ind.ZIndex = 6
    ind.Parent = btn

    tabButtons[name] = {Button = btn, Indicator = ind}
    
    btn.MouseButton1Click:Connect(function()
        for _, tab in pairs(tabButtons) do
            tab.Button.TextColor3 = Color3.fromRGB(140,140,150)
            tab.Indicator.Visible = false
        end
        
        btn.TextColor3 = Color3.new(1,1,1)
        ind.Visible = true

        for pagename, page in pairs(pages) do
            page.Visible = (pagename == name)
        end
    end)
end

-- Button Creation
local function createToggle(parent,text,yPos,callback)
	local frame = Instance.new("Frame")
	frame.Size = UDim2.new(1,-20,0,40)
	frame.Position = UDim2.new(0,10,0,yPos)
	frame.BackgroundTransparency = 1
	frame.LayoutOrder = yPos
	frame.Parent = parent

	local label = Instance.new("TextLabel")
	label.Size = UDim2.new(1,-70,1,0)
	label.BackgroundTransparency = 1
	label.Text = text
	label.TextColor3 = Color3.fromRGB(200,200,200)
	label.Font = Enum.Font.Gotham
	label.TextSize = 14
	label.TextXAlignment = Enum.TextXAlignment.Left
	label.Parent = frame

	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0,52,0,26)
	btn.Position = UDim2.new(1,-62,0.5,-13)
	btn.BackgroundColor3 = Color3.fromRGB(60,60,65)
	btn.Text = ""
	btn.AutoButtonColor = false
	btn.Parent = frame
	Instance.new("UICorner",btn).CornerRadius = UDim.new(0,13)

	local circle = Instance.new("Frame")
	circle.Size = UDim2.new(0,20,0,20)
	circle.Position = UDim2.new(0,4,0.5,-10)
	circle.BackgroundColor3 = Color3.fromRGB(180,180,180)
	circle.Parent = btn
	Instance.new("UICorner",circle).CornerRadius = UDim.new(1,0)

	local state = false
	btn.MouseButton1Click:Connect(function()
		state = not state
		btn.BackgroundColor3 = state and Color3.fromRGB(100,180,255) or Color3.fromRGB(60,60,65)
		Services.TweenService:Create(circle,TweenInfo.new(0.2),{Position = state and UDim2.new(0,28,0.5,-10) or UDim2.new(0,4,0.5,-10)}):Play()
		if callback then callback(state) end
	end)
	local function set(s)
		state = s
		btn.BackgroundColor3 = s and Color3.fromRGB(100,180,255) or Color3.fromRGB(60,60,65)
		circle.Position = s and UDim2.new(0,28,0.5,-10) or UDim2.new(0,4,0.5,-10)
	end
	set(state)
	return set
end

local function createButton(parent,text,yPos,callback)
	local frame = Instance.new("Frame",parent)
	frame.Size = UDim2.new(1,-20,0,40)
	frame.Position = UDim2.new(0,10,0,yPos)
	frame.BackgroundTransparency = 1
	frame.LayoutOrder = yPos

	local btn = Instance.new("TextButton",frame)
	btn.Size = UDim2.new(1,0,1,0)
	btn.BackgroundColor3 = Color3.fromRGB(70,130,180)
	btn.Text = text
	btn.TextColor3 = Color3.new(1,1,1)
	btn.Font = Enum.Font.GothamBold
	btn.TextSize = 15
	Instance.new("UICorner",btn).CornerRadius = UDim.new(0,8)
	btn.MouseButton1Click:Connect(callback)
end

-- Visuals
createToggle(pages.Visual,"Xray",10,function(state)
	xrayEnabled = state
	if state then
		XrayOn(obj)
		if xrayConnection then xrayConnection:Disconnect() end
		local last = tick()
		xrayConnection = Services.RunService.Heartbeat:Connect(function()
			if tick()-last >= 1 then XrayOn(obj) last = tick() end
		end)
	else
		XrayOff(obj)
		if xrayConnection then xrayConnection:Disconnect() xrayConnection = nil end
	end
end)

createToggle(pages.Visual,"Base ESP",58,function(state)
    if state then
        PlotESP_Enabled = true
        for _,p in obj:GetChildren() do if p:IsA("Model") then CreatePlotESP(p) end end
        obj.ChildAdded:Connect(function(p) task.wait(0.5) if p:IsA("Model") then CreatePlotESP(p) end end)
        obj.ChildRemoved:Connect(RemovePlotESP)
    else
        PlotESP_Enabled = false
        for p,_ in PlotESP_Data do RemovePlotESP(p) end
    end
end)

createToggle(pages.Visual,"Plot Timer [Fixing...]",106,function(state)
    if state then
        for _,p in obj:GetChildren() do if p:IsA("Model") then CreateTimeESP(p) end end
        obj.ChildAdded:Connect(function(p) task.wait(0.5) if p:IsA("Model") then CreateTimeESP(p) end end)
        obj.ChildRemoved:Connect(RemoveTimeESP)
    else
        for p,_ in PlotTimeESP_Data do RemoveTimeESP(p) end
    end
end)

createToggle(contentArea.Visual,"Best Value ESP",154,function(state)
    if state then startBrainrotEsp() else stopBrainrotEsp() end
end)

createToggle(contentArea.Visual"Player ESP",202,function(state)
	if state then enableEsp() else disableEsp() end
end)

-- Combat
createButton(pages.Combat,"Melee Aura [GUI]",10,function()
	if getgenv().MeleeAuraLoaded then createNotify("Melee Aura already loaded!") return end
	getgenv().MeleeAuraLoaded = true
	loadstring(game:HttpGet("https://pastefy.app/QGZ2PBmO/raw"))()
end)

createToggle(pages.Combat,"Anti Ragdoll",58,function(state)
    if state then
        EnableRagdollDesync()
    else
        DisableRagdollDesync()
    end
end)

createToggle(pages.Combat,"Anti Knockback",106,function(state)
    if state then
        EnableAntiHit()
    else
        DisableAntiHit()
    end
end)

createToggle(contentArea.Combat,"Kick After Steal",154,function(state)
    if state then enableKickAfterSteal() else disableKickAfterSteal() end
end)

-- Movement
createToggle(pages.Movement,"NyoaSs Fly",10,function(state)
    if state then
        OpenNyoaFly()
    else
        for _, scr in Player.PlayerGui:GetChildren() do
            if scr:IsA("ScreenGui") and scr.Name == "NyoaSsFly" then
                scr:Destroy()
            end
        end
        NyoaFly_Enabled = false
    end
end)

createToggle(pages.Movement,"Nyoa.Ss Boost",58,function(state)
    if state then
        OpenNyoaBoost()
    else
        for _, scr in Player.PlayerGui:GetChildren() do
            if scr:IsA("ScreenGui") and scr.Name == "NyoaSsBoost" then
                scr:Destroy()
            end
        end
        NyoaBoost_Enabled = false
    end
end)

createToggle(pages.Movement,"Float [Gui]",106,function(state)
    if state then
        OpenFloatGui()
    else
        for _, scr in pgui:GetChildren() do
            if scr:IsA("ScreenGui") and scr.Name == "NyoaSs_FloatGui" then
                scr:Destroy()
            end
        end
        FloatGui_Enabled = false
    end
end)

createToggle(pages.Movement,"Grapple Fly",154,function(state)
    if state then
        OpenNyoaFlyGrapple()
    else
        for _, scr in Player.PlayerGui:GetChildren() do
            if scr:IsA("ScreenGui") and scr.Name == "NyoaSsGrappleFly" then
                scr:Destroy()
            end
        end
        NyoaFlyGrapple_Enabled = false
    end
end)

createToggle(contentArea.Misc,"Infinite Jump",202,function(state)
    if state then infiniteJumpCreate() else infiniteJumpStop() infiniteJumpDestroy() end
end)

-- Misc
createToggle(pages.Misc,"Invisible",10,function(state)
    if state then
        OpenInvisible()
    else
        for _, scr in Player.PlayerGui:GetChildren() do
            if scr:IsA("ScreenGui") and scr.Name == "InvisibleGUI" then
                scr:Destroy()
            end
        end
        Invisible_Enabled = false
    end
end)

createToggle(pages.Misc,"Unwalk [No Walk Anim]",58,function(state)
	local anim = Player.Character and Player.Character:FindFirstChild("Animate")
	if anim then anim.Disabled = state end
end)

-- Desync
local NyoaSsDesync = false

createToggle(pages.Misc,"Desync Combined",106,function(state)
    if state then
        if NyoaSsDesync then
            createNotify("Script loaded!")
            return
        end
        NyoaSsDesync = true
        loadstring(game:HttpGet("https://pastefy.app/D1xVVUU6/raw"))()
        createNotify("Script successfully enabled!")
    else
        NyoaSsDesync = false
        -- for _, gui in Player.PlayerGui:GetChildren() do
        --     if gui.Name == "NyoaSsDesync" then gui:Destroy() end
        -- end
    end
end)

-- Bypass
local NyoaSSBypass = false

createToggle(pages.Misc,"Bypass Desync [100% Recommended]",154,function(state)
    if state then
        if NyoaSSBypass then
            createNotify("Script loaded!")
            return
        end
        NyoaSSBypass = true
        loadstring(game:HttpGet("https://pastefy.app/uM8hMvu8/raw"))()
        createNotify("Script successfully enabled!")
    else
        NyoaSSBypass = false
        -- for _, gui in Player.PlayerGui:GetChildren() do
        --     if gui.Name == "NyoaSSBypass" then gui:Destroy() end
        -- end
    end
end)

createToggle(pages.Misc,"Friends Allowed",202,function(state)
    if state then
        OpenFriendsGUI()
    else
        for _, scr in Player.PlayerGui:GetChildren() do
            if scr:IsA("ScreenGui") and scr.Name == "NyoaSsFriendsToggle" then
                scr:Destroy()
            end
        end
        FriendsGUI_Enabled = false
    end
end)

createToggle(contentArea.Misc,"Semi Invisible",250,function(state)
	if state then semiInvisibleCreate() else semiInvisibleStop() semiInvisibleDestroy() end
end)

player.CharacterAdded:Connect(function()
	task.wait(0.3)
	if isSemiInvisible then
		toggleSemiInvisible(false)
		if btn then
			btn.Text = "Semi Invisible: OFF"
			btn.BackgroundColor3 = Color3.fromRGB(35,35,35)
		end
	end
end)

createToggle(contentArea.Misc,"Auto Steal",298,function(state)
    if state then autoStealCreate() else autoStealStop() autoStealDestroy() end
end)

-- Performance
local optimizationEnabled = false
local optimConnection = nil
local function OptimOn() 
    optimizationEnabled = true 
    optimConnection = task.spawn(function() 
        while optimizationEnabled do 
            for _,v in workspace:GetDescendants() do 
                if v:IsA("BasePart") and not v.Anchored and v.Parent ~= Player.Character and not v.Parent:FindFirstChild("Humanoid") then 
                    v:Destroy() 
                end 
            end 
            task.wait(2) 
        end 
    end) 
end
local function OptimOff() 
    optimizationEnabled = false 
    if optimConnection then task.cancel(optimConnection) end 
end
createToggle(pages.Perform,"Delete Parts",10,function(state) 
    if state then OptimOn() else OptimOff() end 
end)

createToggle(contentArea.Perform,"Anti Effects",58,function(state)
    if state then antiEffectsCreate() else antiEffectsStop() antiEffectsDestroy() end
end)

-- Settings
createButton(pages.Setting,"Nyoa Helper",10,function()
    loadstring(game:HttpGet("https://pastefy.app/MItLJzDI/raw"))()
end)

local antiKickToggle = createToggle(pages.Setting, "Anti Kick", 58, function(state)
	if not state then
		createNotify("Anti Kick disabled! You can be kicked now")
	else
		createNotify("Anti Kick enabled")
	end
end)
antiKickToggle(true)

task.spawn(function()
	local hk = false
	for _, v in pairs(getgc(true)) do
		if typeof(v) == "table" then
			local fn = rawget(v, "observeTag")
			if typeof(fn) == "function" and not hk then
				hk = true
				hookfunction(fn, newcclosure(function(_, _)
					return {
						Disconnect = function() end,
						disconnect = function() end
					}
				end))
			end
		end
	end
end)

-- Closing and minimizing
local minimized = false

closeBtn.MouseButton1Click:Connect(function()
	mainFrame.Visible = false
	createNotify("NyoaSs Unloading, Please wait :/")
	task.wait(6.3)
	screenGui:Destroy()
end)

minimizeBtn.MouseButton1Click:Connect(function()
	minimized = not minimized
	if minimized then
		Services.TweenService:Create(mainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quint), {Size = UDim2.new(0,420,0,44)}):Play()
		minimizeBtn.Text = "+"
	else
		Services.TweenService:Create(mainFrame, TweenInfo.new(0.3, Enum.EasingStyle.Quint), {Size = UDim2.new(0,420,0,300)}):Play()
		minimizeBtn.Text = "-"
	end
end)